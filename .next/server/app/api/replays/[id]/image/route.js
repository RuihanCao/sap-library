/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/replays/[id]/image/route";
exports.ids = ["app/api/replays/[id]/image/route"];
exports.modules = {

/***/ "(rsc)/./app/api/replays/[id]/image/route.js":
/*!*********************************************!*\
  !*** ./app/api/replays/[id]/image/route.js ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst { renderReplayImage } = __webpack_require__(/*! @/lib/render */ \"(rsc)/./lib/render.js\");\nconst { getBattleInfo } = __webpack_require__(/*! @/lib/battle */ \"(rsc)/./lib/battle.js\");\nconst { setAssetBaseUrl } = __webpack_require__(/*! @/lib/config */ \"(rsc)/./lib/config.js\");\nconst runtime = \"nodejs\";\nasync function GET(req, context) {\n    try {\n        const requestUrl = new URL(req.url);\n        setAssetBaseUrl(requestUrl.origin);\n    } catch  {\n    // ignore\n    }\n    const params = context?.params ? await context.params : null;\n    const idFromParams = params?.id;\n    let id = idFromParams;\n    if (!id) {\n        try {\n            const url = new URL(req.url);\n            const parts = url.pathname.split(\"/\").filter(Boolean);\n            const idx = parts.indexOf(\"replays\");\n            if (idx !== -1 && parts[idx + 1]) {\n                id = parts[idx + 1];\n            }\n        } catch  {\n        // ignore\n        }\n    }\n    if (!id) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"missing id\"\n        }, {\n            status: 400\n        });\n    }\n    const { rows } = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.pool.query(\"select raw_json from replays where id=$1\", [\n        id\n    ]);\n    if (!rows.length) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"not found\"\n        }, {\n            status: 404\n        });\n    }\n    const replay = rows[0].raw_json;\n    let maxLives = 5;\n    if (replay?.GenesisModeModel) {\n        try {\n            const model = JSON.parse(replay.GenesisModeModel);\n            if (Number.isFinite(model?.MaxLives)) {\n                maxLives = model.MaxLives;\n            }\n        } catch  {\n        // ignore\n        }\n    }\n    const actions = replay.Actions || [];\n    const battles = actions.filter((a)=>a.Type === 0).map((a)=>JSON.parse(a.Battle));\n    const battleOpponentInfo = actions.filter((a)=>a.Type === 1).map((a)=>JSON.parse(a.Mode).Opponents);\n    const parsedBattles = battles.map(getBattleInfo);\n    const playerName = battles[0]?.User?.DisplayName || null;\n    const headerOpponentName = parsedBattles[0]?.opponentName || null;\n    try {\n        const imageBuffer = await renderReplayImage({\n            battles: parsedBattles,\n            battleOpponentInfo,\n            maxLives,\n            includeOdds: false,\n            winPercentResults: [],\n            playerName,\n            headerOpponentName\n        });\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(imageBuffer, {\n            headers: {\n                \"Content-Type\": \"image/png\",\n                \"Cache-Control\": \"public, max-age=3600, s-maxage=86400, stale-while-revalidate=604800\"\n            }\n        });\n    } catch (err) {\n        console.error(\"Replay image render failed\", {\n            id,\n            error: err?.message || err,\n            stack: err?.stack || null\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"failed to render image\"\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3JlcGxheXMvW2lkXS9pbWFnZS9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJDO0FBQ1g7QUFDaEMsTUFBTSxFQUFFRSxpQkFBaUIsRUFBRSxHQUFHQyxtQkFBT0EsQ0FBQywyQ0FBYztBQUNwRCxNQUFNLEVBQUVDLGFBQWEsRUFBRSxHQUFHRCxtQkFBT0EsQ0FBQywyQ0FBYztBQUNoRCxNQUFNLEVBQUVFLGVBQWUsRUFBRSxHQUFHRixtQkFBT0EsQ0FBQywyQ0FBYztBQUUzQyxNQUFNRyxVQUFVLFNBQVM7QUFFekIsZUFBZUMsSUFBSUMsR0FBRyxFQUFFQyxPQUFPO0lBQ3BDLElBQUk7UUFDRixNQUFNQyxhQUFhLElBQUlDLElBQUlILElBQUlJLEdBQUc7UUFDbENQLGdCQUFnQkssV0FBV0csTUFBTTtJQUNuQyxFQUFFLE9BQU07SUFDTixTQUFTO0lBQ1g7SUFFQSxNQUFNQyxTQUFTTCxTQUFTSyxTQUFTLE1BQU1MLFFBQVFLLE1BQU0sR0FBRztJQUN4RCxNQUFNQyxlQUFlRCxRQUFRRTtJQUM3QixJQUFJQSxLQUFLRDtJQUVULElBQUksQ0FBQ0MsSUFBSTtRQUNQLElBQUk7WUFDRixNQUFNSixNQUFNLElBQUlELElBQUlILElBQUlJLEdBQUc7WUFDM0IsTUFBTUssUUFBUUwsSUFBSU0sUUFBUSxDQUFDQyxLQUFLLENBQUMsS0FBS0MsTUFBTSxDQUFDQztZQUM3QyxNQUFNQyxNQUFNTCxNQUFNTSxPQUFPLENBQUM7WUFDMUIsSUFBSUQsUUFBUSxDQUFDLEtBQUtMLEtBQUssQ0FBQ0ssTUFBTSxFQUFFLEVBQUU7Z0JBQ2hDTixLQUFLQyxLQUFLLENBQUNLLE1BQU0sRUFBRTtZQUNyQjtRQUNGLEVBQUUsT0FBTTtRQUNOLFNBQVM7UUFDWDtJQUNGO0lBRUEsSUFBSSxDQUFDTixJQUFJO1FBQ1AsT0FBT2hCLHFEQUFZQSxDQUFDd0IsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBYSxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNsRTtJQUVBLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUcsTUFBTTFCLHlDQUFJQSxDQUFDMkIsS0FBSyxDQUFDLDRDQUE0QztRQUFDWjtLQUFHO0lBQ2xGLElBQUksQ0FBQ1csS0FBS0UsTUFBTSxFQUFFO1FBQ2hCLE9BQU83QixxREFBWUEsQ0FBQ3dCLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQVksR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDakU7SUFFQSxNQUFNSSxTQUFTSCxJQUFJLENBQUMsRUFBRSxDQUFDSSxRQUFRO0lBQy9CLElBQUlDLFdBQVc7SUFFZixJQUFJRixRQUFRRyxrQkFBa0I7UUFDNUIsSUFBSTtZQUNGLE1BQU1DLFFBQVFDLEtBQUtDLEtBQUssQ0FBQ04sT0FBT0csZ0JBQWdCO1lBQ2hELElBQUlJLE9BQU9DLFFBQVEsQ0FBQ0osT0FBT0ssV0FBVztnQkFDcENQLFdBQVdFLE1BQU1LLFFBQVE7WUFDM0I7UUFDRixFQUFFLE9BQU07UUFDTixTQUFTO1FBQ1g7SUFDRjtJQUVBLE1BQU1DLFVBQVVWLE9BQU9XLE9BQU8sSUFBSSxFQUFFO0lBQ3BDLE1BQU1DLFVBQVVGLFFBQ2JwQixNQUFNLENBQUMsQ0FBQ3VCLElBQU1BLEVBQUVDLElBQUksS0FBSyxHQUN6QkMsR0FBRyxDQUFDLENBQUNGLElBQU1SLEtBQUtDLEtBQUssQ0FBQ08sRUFBRUcsTUFBTTtJQUNqQyxNQUFNQyxxQkFBcUJQLFFBQ3hCcEIsTUFBTSxDQUFDLENBQUN1QixJQUFNQSxFQUFFQyxJQUFJLEtBQUssR0FDekJDLEdBQUcsQ0FBQyxDQUFDRixJQUFNUixLQUFLQyxLQUFLLENBQUNPLEVBQUVLLElBQUksRUFBRUMsU0FBUztJQUUxQyxNQUFNQyxnQkFBZ0JSLFFBQVFHLEdBQUcsQ0FBQ3pDO0lBQ2xDLE1BQU0rQyxhQUFhVCxPQUFPLENBQUMsRUFBRSxFQUFFVSxNQUFNQyxlQUFlO0lBQ3BELE1BQU1DLHFCQUFxQkosYUFBYSxDQUFDLEVBQUUsRUFBRUssZ0JBQWdCO0lBRTdELElBQUk7UUFDRixNQUFNQyxjQUFjLE1BQU10RCxrQkFBa0I7WUFDMUN3QyxTQUFTUTtZQUNUSDtZQUNBZjtZQUNBeUIsYUFBYTtZQUNiQyxtQkFBbUIsRUFBRTtZQUNyQlA7WUFDQUc7UUFDRjtRQUVBLE9BQU8sSUFBSXRELHFEQUFZQSxDQUFDd0QsYUFBYTtZQUNuQ0csU0FBUztnQkFDUCxnQkFBZ0I7Z0JBQ2hCLGlCQUFpQjtZQUNuQjtRQUNGO0lBQ0YsRUFBRSxPQUFPQyxLQUFLO1FBQ1pDLFFBQVFwQyxLQUFLLENBQUMsOEJBQThCO1lBQzFDVDtZQUNBUyxPQUFPbUMsS0FBS0UsV0FBV0Y7WUFDdkJHLE9BQU9ILEtBQUtHLFNBQVM7UUFDdkI7UUFDQSxPQUFPL0QscURBQVlBLENBQUN3QixJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF5QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUM5RTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBvcnRlXFxEb3dubG9hZHNcXHNhcC1yZXBsYXktYm90LW1haW5cXHNhcC1yZXBsYXktYm90LW1haW5cXGFwcFxcYXBpXFxyZXBsYXlzXFxbaWRdXFxpbWFnZVxccm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBwb29sIH0gZnJvbSBcIkAvbGliL2RiXCI7XG5jb25zdCB7IHJlbmRlclJlcGxheUltYWdlIH0gPSByZXF1aXJlKFwiQC9saWIvcmVuZGVyXCIpO1xuY29uc3QgeyBnZXRCYXR0bGVJbmZvIH0gPSByZXF1aXJlKFwiQC9saWIvYmF0dGxlXCIpO1xuY29uc3QgeyBzZXRBc3NldEJhc2VVcmwgfSA9IHJlcXVpcmUoXCJAL2xpYi9jb25maWdcIik7XG5cbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJub2RlanNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXEsIGNvbnRleHQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0VXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICBzZXRBc3NldEJhc2VVcmwocmVxdWVzdFVybC5vcmlnaW4pO1xuICB9IGNhdGNoIHtcbiAgICAvLyBpZ25vcmVcbiAgfVxuXG4gIGNvbnN0IHBhcmFtcyA9IGNvbnRleHQ/LnBhcmFtcyA/IGF3YWl0IGNvbnRleHQucGFyYW1zIDogbnVsbDtcbiAgY29uc3QgaWRGcm9tUGFyYW1zID0gcGFyYW1zPy5pZDtcbiAgbGV0IGlkID0gaWRGcm9tUGFyYW1zO1xuXG4gIGlmICghaWQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICAgIGNvbnN0IHBhcnRzID0gdXJsLnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICBjb25zdCBpZHggPSBwYXJ0cy5pbmRleE9mKFwicmVwbGF5c1wiKTtcbiAgICAgIGlmIChpZHggIT09IC0xICYmIHBhcnRzW2lkeCArIDFdKSB7XG4gICAgICAgIGlkID0gcGFydHNbaWR4ICsgMV07XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBpZ25vcmVcbiAgICB9XG4gIH1cblxuICBpZiAoIWlkKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwibWlzc2luZyBpZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cblxuICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHBvb2wucXVlcnkoXCJzZWxlY3QgcmF3X2pzb24gZnJvbSByZXBsYXlzIHdoZXJlIGlkPSQxXCIsIFtpZF0pO1xuICBpZiAoIXJvd3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwibm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgfVxuXG4gIGNvbnN0IHJlcGxheSA9IHJvd3NbMF0ucmF3X2pzb247XG4gIGxldCBtYXhMaXZlcyA9IDU7XG5cbiAgaWYgKHJlcGxheT8uR2VuZXNpc01vZGVNb2RlbCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtb2RlbCA9IEpTT04ucGFyc2UocmVwbGF5LkdlbmVzaXNNb2RlTW9kZWwpO1xuICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShtb2RlbD8uTWF4TGl2ZXMpKSB7XG4gICAgICAgIG1heExpdmVzID0gbW9kZWwuTWF4TGl2ZXM7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBpZ25vcmVcbiAgICB9XG4gIH1cblxuICBjb25zdCBhY3Rpb25zID0gcmVwbGF5LkFjdGlvbnMgfHwgW107XG4gIGNvbnN0IGJhdHRsZXMgPSBhY3Rpb25zXG4gICAgLmZpbHRlcigoYSkgPT4gYS5UeXBlID09PSAwKVxuICAgIC5tYXAoKGEpID0+IEpTT04ucGFyc2UoYS5CYXR0bGUpKTtcbiAgY29uc3QgYmF0dGxlT3Bwb25lbnRJbmZvID0gYWN0aW9uc1xuICAgIC5maWx0ZXIoKGEpID0+IGEuVHlwZSA9PT0gMSlcbiAgICAubWFwKChhKSA9PiBKU09OLnBhcnNlKGEuTW9kZSkuT3Bwb25lbnRzKTtcblxuICBjb25zdCBwYXJzZWRCYXR0bGVzID0gYmF0dGxlcy5tYXAoZ2V0QmF0dGxlSW5mbyk7XG4gIGNvbnN0IHBsYXllck5hbWUgPSBiYXR0bGVzWzBdPy5Vc2VyPy5EaXNwbGF5TmFtZSB8fCBudWxsO1xuICBjb25zdCBoZWFkZXJPcHBvbmVudE5hbWUgPSBwYXJzZWRCYXR0bGVzWzBdPy5vcHBvbmVudE5hbWUgfHwgbnVsbDtcblxuICB0cnkge1xuICAgIGNvbnN0IGltYWdlQnVmZmVyID0gYXdhaXQgcmVuZGVyUmVwbGF5SW1hZ2Uoe1xuICAgICAgYmF0dGxlczogcGFyc2VkQmF0dGxlcyxcbiAgICAgIGJhdHRsZU9wcG9uZW50SW5mbyxcbiAgICAgIG1heExpdmVzLFxuICAgICAgaW5jbHVkZU9kZHM6IGZhbHNlLFxuICAgICAgd2luUGVyY2VudFJlc3VsdHM6IFtdLFxuICAgICAgcGxheWVyTmFtZSxcbiAgICAgIGhlYWRlck9wcG9uZW50TmFtZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoaW1hZ2VCdWZmZXIsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJpbWFnZS9wbmdcIixcbiAgICAgICAgXCJDYWNoZS1Db250cm9sXCI6IFwicHVibGljLCBtYXgtYWdlPTM2MDAsIHMtbWF4YWdlPTg2NDAwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTYwNDgwMFwiXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJSZXBsYXkgaW1hZ2UgcmVuZGVyIGZhaWxlZFwiLCB7XG4gICAgICBpZCxcbiAgICAgIGVycm9yOiBlcnI/Lm1lc3NhZ2UgfHwgZXJyLFxuICAgICAgc3RhY2s6IGVycj8uc3RhY2sgfHwgbnVsbFxuICAgIH0pO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcImZhaWxlZCB0byByZW5kZXIgaW1hZ2VcIiB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicG9vbCIsInJlbmRlclJlcGxheUltYWdlIiwicmVxdWlyZSIsImdldEJhdHRsZUluZm8iLCJzZXRBc3NldEJhc2VVcmwiLCJydW50aW1lIiwiR0VUIiwicmVxIiwiY29udGV4dCIsInJlcXVlc3RVcmwiLCJVUkwiLCJ1cmwiLCJvcmlnaW4iLCJwYXJhbXMiLCJpZEZyb21QYXJhbXMiLCJpZCIsInBhcnRzIiwicGF0aG5hbWUiLCJzcGxpdCIsImZpbHRlciIsIkJvb2xlYW4iLCJpZHgiLCJpbmRleE9mIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwicm93cyIsInF1ZXJ5IiwibGVuZ3RoIiwicmVwbGF5IiwicmF3X2pzb24iLCJtYXhMaXZlcyIsIkdlbmVzaXNNb2RlTW9kZWwiLCJtb2RlbCIsIkpTT04iLCJwYXJzZSIsIk51bWJlciIsImlzRmluaXRlIiwiTWF4TGl2ZXMiLCJhY3Rpb25zIiwiQWN0aW9ucyIsImJhdHRsZXMiLCJhIiwiVHlwZSIsIm1hcCIsIkJhdHRsZSIsImJhdHRsZU9wcG9uZW50SW5mbyIsIk1vZGUiLCJPcHBvbmVudHMiLCJwYXJzZWRCYXR0bGVzIiwicGxheWVyTmFtZSIsIlVzZXIiLCJEaXNwbGF5TmFtZSIsImhlYWRlck9wcG9uZW50TmFtZSIsIm9wcG9uZW50TmFtZSIsImltYWdlQnVmZmVyIiwiaW5jbHVkZU9kZHMiLCJ3aW5QZXJjZW50UmVzdWx0cyIsImhlYWRlcnMiLCJlcnIiLCJjb25zb2xlIiwibWVzc2FnZSIsInN0YWNrIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/replays/[id]/image/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/battle.js":
/*!***********************!*\
  !*** ./lib/battle.js ***!
  \***********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst path = __webpack_require__(/*! path */ \"path\");\nconst { PETS, PERKS, TOYS } = __webpack_require__(/*! ./data */ \"(rsc)/./lib/data.js\");\nconst { PLACEHOLDER_SPRITE, PLACEHOLDER_PERK, assetPath } = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.js\");\nfunction getPetInfo(petJSON) {\n    const safeNum = (value, fallback = 0)=>{\n        const n = Number(value);\n        return Number.isFinite(n) ? n : fallback;\n    };\n    const petId = Number(petJSON[\"Enu\"] ?? 0);\n    const petName = PETS[petId] ? PETS[petId].Name : \"Token Pet\";\n    const petLevel = safeNum(petJSON?.[\"Lvl\"], 1);\n    const petExperience = safeNum(petJSON?.[\"Exp\"], 0);\n    const petAtk = safeNum(petJSON?.[\"At\"]?.[\"Perm\"], 0);\n    const petHp = safeNum(petJSON?.[\"Hp\"]?.[\"Perm\"], 0);\n    const petTempAtk = safeNum(petJSON?.[\"At\"]?.[\"Temp\"], 0);\n    const petTempHp = safeNum(petJSON?.[\"Hp\"]?.[\"Temp\"], 0);\n    const petPerkId = petJSON[\"Perk\"] ?? -1;\n    const petImagePath = PETS[petId] ? assetPath(path.join('Sprite', 'Pets', `${PETS[petId].NameId}.png`)) : PLACEHOLDER_SPRITE;\n    if (petPerkId === -1) {\n        return {\n            name: petName,\n            attack: petAtk,\n            health: petHp,\n            tempAttack: petTempAtk,\n            tempHealth: petTempHp,\n            level: petLevel,\n            xp: petExperience,\n            perk: null,\n            imagePath: petImagePath,\n            perkImagePath: null\n        };\n    }\n    const perkName = PERKS[petPerkId] ? PERKS[petPerkId].Name : \"UNKNOWN PERK\";\n    const perkImage = PERKS[petPerkId] ? assetPath(path.join('Sprite', 'Food', `${PERKS[petPerkId].NameId}.png`)) : PLACEHOLDER_PERK;\n    return {\n        name: petName,\n        attack: petAtk,\n        health: petHp,\n        tempAttack: petTempAtk,\n        tempHealth: petTempHp,\n        level: petLevel,\n        xp: petExperience,\n        perk: perkName,\n        imagePath: petImagePath,\n        perkImagePath: perkImage\n    };\n}\nfunction getBattleInfo(battle) {\n    const newBattle = {};\n    newBattle.playerBoard = {\n        boardPets: [],\n        toy: {\n            imagePath: null,\n            level: 0\n        }\n    };\n    newBattle.oppBoard = {\n        boardPets: [],\n        toy: {\n            imagePath: null,\n            level: 0\n        }\n    };\n    newBattle.outcome = battle[\"Outcome\"];\n    newBattle.opponentName = battle[\"Opponent\"][\"DisplayName\"];\n    for (const petJSON of battle[\"UserBoard\"][\"Mins\"][\"Items\"]){\n        if (petJSON !== null) {\n            newBattle.playerBoard.boardPets.push(getPetInfo(petJSON));\n        }\n    }\n    for (const toy of battle[\"UserBoard\"][\"Rel\"][\"Items\"]){\n        if (toy !== null && toy[\"Enu\"]) {\n            const toyId = toy[\"Enu\"];\n            newBattle.playerBoard.toy.imagePath = TOYS[toyId] ? assetPath(path.join('Sprite', 'Toys', `${TOYS[toyId].NameId}.png`)) : PLACEHOLDER_SPRITE;\n            newBattle.playerBoard.toy.level = toy[\"Lvl\"];\n        }\n    }\n    for (const petJSON of battle[\"OpponentBoard\"][\"Mins\"][\"Items\"]){\n        if (petJSON !== null) {\n            newBattle.oppBoard.boardPets.push(getPetInfo(petJSON));\n        }\n    }\n    for (const toy of battle[\"OpponentBoard\"][\"Rel\"][\"Items\"]){\n        if (toy !== null && toy[\"Enu\"]) {\n            const toyId = toy[\"Enu\"];\n            newBattle.oppBoard.toy.imagePath = TOYS[toyId] ? assetPath(path.join('Sprite', 'Toys', `${TOYS[toyId].NameId}.png`)) : PLACEHOLDER_SPRITE;\n            newBattle.oppBoard.toy.level = toy[\"Lvl\"];\n        }\n    }\n    return newBattle;\n}\nmodule.exports = {\n    getBattleInfo,\n    getPetInfo\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQzFDNUMsVUFBVVAsS0FBSzJCLElBQUksQ0FBQyxVQUFVLFFBQVEsR0FBR3ZCLElBQUksQ0FBQytDLE1BQU0sQ0FBQ3ZCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FDakV2QjtZQUNKc0MsVUFBVUksUUFBUSxDQUFDRCxHQUFHLENBQUNaLEtBQUssR0FBR1ksR0FBRyxDQUFDLE1BQU07UUFDM0M7SUFDRjtJQUNBLE9BQU9IO0FBQ1Q7QUFFQVMsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZaO0lBQ0FqQztBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBvcnRlXFxEb3dubG9hZHNcXHNhcC1yZXBsYXktYm90LW1haW5cXHNhcC1yZXBsYXktYm90LW1haW5cXGxpYlxcYmF0dGxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCB7IFBFVFMsIFBFUktTLCBUT1lTIH0gPSByZXF1aXJlKCcuL2RhdGEnKTtcbmNvbnN0IHsgUExBQ0VIT0xERVJfU1BSSVRFLCBQTEFDRUhPTERFUl9QRVJLLCBhc3NldFBhdGggfSA9IHJlcXVpcmUoJy4vY29uZmlnJyk7XG5cbmZ1bmN0aW9uIGdldFBldEluZm8ocGV0SlNPTikge1xuICBjb25zdCBzYWZlTnVtID0gKHZhbHVlLCBmYWxsYmFjayA9IDApID0+IHtcbiAgICBjb25zdCBuID0gTnVtYmVyKHZhbHVlKTtcbiAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG4pID8gbiA6IGZhbGxiYWNrO1xuICB9O1xuICBjb25zdCBwZXRJZCA9IE51bWJlcihwZXRKU09OW1wiRW51XCJdID8/IDApO1xuICBjb25zdCBwZXROYW1lID0gUEVUU1twZXRJZF0gPyBQRVRTW3BldElkXS5OYW1lIDogXCJUb2tlbiBQZXRcIjtcbiAgY29uc3QgcGV0TGV2ZWwgPSBzYWZlTnVtKHBldEpTT04/LltcIkx2bFwiXSwgMSk7XG4gIGNvbnN0IHBldEV4cGVyaWVuY2UgPSBzYWZlTnVtKHBldEpTT04/LltcIkV4cFwiXSwgMCk7XG4gIGNvbnN0IHBldEF0ayA9IHNhZmVOdW0ocGV0SlNPTj8uW1wiQXRcIl0/LltcIlBlcm1cIl0sIDApO1xuICBjb25zdCBwZXRIcCA9IHNhZmVOdW0ocGV0SlNPTj8uW1wiSHBcIl0/LltcIlBlcm1cIl0sIDApO1xuICBjb25zdCBwZXRUZW1wQXRrID0gc2FmZU51bShwZXRKU09OPy5bXCJBdFwiXT8uW1wiVGVtcFwiXSwgMCk7XG4gIGNvbnN0IHBldFRlbXBIcCA9IHNhZmVOdW0ocGV0SlNPTj8uW1wiSHBcIl0/LltcIlRlbXBcIl0sIDApO1xuICBjb25zdCBwZXRQZXJrSWQgPSBwZXRKU09OW1wiUGVya1wiXSA/PyAtMTtcbiAgY29uc3QgcGV0SW1hZ2VQYXRoID0gUEVUU1twZXRJZF1cbiAgICA/IGFzc2V0UGF0aChwYXRoLmpvaW4oJ1Nwcml0ZScsICdQZXRzJywgYCR7UEVUU1twZXRJZF0uTmFtZUlkfS5wbmdgKSlcbiAgICA6IFBMQUNFSE9MREVSX1NQUklURTtcbiAgaWYgKHBldFBlcmtJZCA9PT0gLTEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogcGV0TmFtZSxcbiAgICAgIGF0dGFjazogcGV0QXRrLFxuICAgICAgaGVhbHRoOiBwZXRIcCxcbiAgICAgIHRlbXBBdHRhY2s6IHBldFRlbXBBdGssXG4gICAgICB0ZW1wSGVhbHRoOiBwZXRUZW1wSHAsXG4gICAgICBsZXZlbDogcGV0TGV2ZWwsXG4gICAgICB4cDogcGV0RXhwZXJpZW5jZSxcbiAgICAgIHBlcms6IG51bGwsXG4gICAgICBpbWFnZVBhdGg6IHBldEltYWdlUGF0aCxcbiAgICAgIHBlcmtJbWFnZVBhdGg6IG51bGxcbiAgICB9O1xuICB9XG4gIGNvbnN0IHBlcmtOYW1lID0gUEVSS1NbcGV0UGVya0lkXSA/IFBFUktTW3BldFBlcmtJZF0uTmFtZSA6IFwiVU5LTk9XTiBQRVJLXCI7XG4gIGNvbnN0IHBlcmtJbWFnZSA9IFBFUktTW3BldFBlcmtJZF1cbiAgICA/IGFzc2V0UGF0aChwYXRoLmpvaW4oJ1Nwcml0ZScsICdGb29kJywgYCR7UEVSS1NbcGV0UGVya0lkXS5OYW1lSWR9LnBuZ2ApKVxuICAgIDogUExBQ0VIT0xERVJfUEVSSztcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBwZXROYW1lLFxuICAgIGF0dGFjazogcGV0QXRrLFxuICAgIGhlYWx0aDogcGV0SHAsXG4gICAgdGVtcEF0dGFjazogcGV0VGVtcEF0ayxcbiAgICB0ZW1wSGVhbHRoOiBwZXRUZW1wSHAsXG4gICAgbGV2ZWw6IHBldExldmVsLFxuICAgIHhwOiBwZXRFeHBlcmllbmNlLFxuICAgIHBlcms6IHBlcmtOYW1lLFxuICAgIGltYWdlUGF0aDogcGV0SW1hZ2VQYXRoLFxuICAgIHBlcmtJbWFnZVBhdGg6IHBlcmtJbWFnZVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRCYXR0bGVJbmZvKGJhdHRsZSkge1xuICBjb25zdCBuZXdCYXR0bGUgPSB7fTtcbiAgbmV3QmF0dGxlLnBsYXllckJvYXJkID0ge1xuICAgIGJvYXJkUGV0czogW10sXG4gICAgdG95OiB7XG4gICAgICBpbWFnZVBhdGg6IG51bGwsXG4gICAgICBsZXZlbDogMFxuICAgIH1cbiAgfTtcblxuICBuZXdCYXR0bGUub3BwQm9hcmQgPSB7XG4gICAgYm9hcmRQZXRzOiBbXSxcbiAgICB0b3k6IHtcbiAgICAgIGltYWdlUGF0aDogbnVsbCxcbiAgICAgIGxldmVsOiAwXG4gICAgfVxuICB9O1xuXG4gIG5ld0JhdHRsZS5vdXRjb21lID0gYmF0dGxlW1wiT3V0Y29tZVwiXTtcbiAgbmV3QmF0dGxlLm9wcG9uZW50TmFtZSA9IGJhdHRsZVtcIk9wcG9uZW50XCJdW1wiRGlzcGxheU5hbWVcIl07XG5cbiAgZm9yIChjb25zdCBwZXRKU09OIG9mIGJhdHRsZVtcIlVzZXJCb2FyZFwiXVtcIk1pbnNcIl1bXCJJdGVtc1wiXSkge1xuICAgIGlmIChwZXRKU09OICE9PSBudWxsKSB7XG4gICAgICBuZXdCYXR0bGUucGxheWVyQm9hcmQuYm9hcmRQZXRzLnB1c2goZ2V0UGV0SW5mbyhwZXRKU09OKSk7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCB0b3kgb2YgYmF0dGxlW1wiVXNlckJvYXJkXCJdW1wiUmVsXCJdW1wiSXRlbXNcIl0pIHtcbiAgICBpZiAodG95ICE9PSBudWxsICYmIHRveVtcIkVudVwiXSkge1xuICAgICAgY29uc3QgdG95SWQgPSB0b3lbXCJFbnVcIl07XG4gICAgICBuZXdCYXR0bGUucGxheWVyQm9hcmQudG95LmltYWdlUGF0aCA9IFRPWVNbdG95SWRdXG4gICAgICAgID8gYXNzZXRQYXRoKHBhdGguam9pbignU3ByaXRlJywgJ1RveXMnLCBgJHtUT1lTW3RveUlkXS5OYW1lSWR9LnBuZ2ApKVxuICAgICAgICA6IFBMQUNFSE9MREVSX1NQUklURTtcbiAgICAgIG5ld0JhdHRsZS5wbGF5ZXJCb2FyZC50b3kubGV2ZWwgPSB0b3lbXCJMdmxcIl07XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBwZXRKU09OIG9mIGJhdHRsZVtcIk9wcG9uZW50Qm9hcmRcIl1bXCJNaW5zXCJdW1wiSXRlbXNcIl0pIHtcbiAgICBpZiAocGV0SlNPTiAhPT0gbnVsbCkge1xuICAgICAgbmV3QmF0dGxlLm9wcEJvYXJkLmJvYXJkUGV0cy5wdXNoKGdldFBldEluZm8ocGV0SlNPTikpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAoY29uc3QgdG95IG9mIGJhdHRsZVtcIk9wcG9uZW50Qm9hcmRcIl1bXCJSZWxcIl1bXCJJdGVtc1wiXSkge1xuICAgIGlmICh0b3kgIT09IG51bGwgJiYgdG95W1wiRW51XCJdKSB7XG4gICAgICBjb25zdCB0b3lJZCA9IHRveVtcIkVudVwiXTtcbiAgICAgIG5ld0JhdHRsZS5vcHBCb2FyZC50b3kuaW1hZ2VQYXRoID0gVE9ZU1t0b3lJZF1cbiAgICAgICAgPyBhc3NldFBhdGgocGF0aC5qb2luKCdTcHJpdGUnLCAnVG95cycsIGAke1RPWVNbdG95SWRdLk5hbWVJZH0ucG5nYCkpXG4gICAgICAgIDogUExBQ0VIT0xERVJfU1BSSVRFO1xuICAgICAgbmV3QmF0dGxlLm9wcEJvYXJkLnRveS5sZXZlbCA9IHRveVtcIkx2bFwiXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ld0JhdHRsZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldEJhdHRsZUluZm8sXG4gIGdldFBldEluZm9cbn07XG4iXSwibmFtZXMiOlsicGF0aCIsInJlcXVpcmUiLCJQRVRTIiwiUEVSS1MiLCJUT1lTIiwiUExBQ0VIT0xERVJfU1BSSVRFIiwiUExBQ0VIT0xERVJfUEVSSyIsImFzc2V0UGF0aCIsImdldFBldEluZm8iLCJwZXRKU09OIiwic2FmZU51bSIsInZhbHVlIiwiZmFsbGJhY2siLCJuIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJwZXRJZCIsInBldE5hbWUiLCJOYW1lIiwicGV0TGV2ZWwiLCJwZXRFeHBlcmllbmNlIiwicGV0QXRrIiwicGV0SHAiLCJwZXRUZW1wQXRrIiwicGV0VGVtcEhwIiwicGV0UGVya0lkIiwicGV0SW1hZ2VQYXRoIiwiam9pbiIsIk5hbWVJZCIsIm5hbWUiLCJhdHRhY2siLCJoZWFsdGgiLCJ0ZW1wQXR0YWNrIiwidGVtcEhlYWx0aCIsImxldmVsIiwieHAiLCJwZXJrIiwiaW1hZ2VQYXRoIiwicGVya0ltYWdlUGF0aCIsInBlcmtOYW1lIiwicGVya0ltYWdlIiwiZ2V0QmF0dGxlSW5mbyIsImJhdHRsZSIsIm5ld0JhdHRsZSIsInBsYXllckJvYXJkIiwiYm9hcmRQZXRzIiwidG95Iiwib3BwQm9hcmQiLCJvdXRjb21lIiwib3Bwb25lbnROYW1lIiwicHVzaCIsInRveUlkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/battle.js\n");

/***/ }),

/***/ "(rsc)/./lib/canvas.js":
/*!***********************!*\
  !*** ./lib/canvas.js ***!
  \***********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst path = __webpack_require__(/*! path */ \"path\");\nlet canvas;\ntry {\n    canvas = __webpack_require__(/*! @napi-rs/canvas */ \"@napi-rs/canvas\");\n} catch (err) {\n    try {\n        canvas = __webpack_require__(/*! canvas */ \"canvas\");\n    } catch  {\n        throw err;\n    }\n}\nfunction registerFallbackFont() {\n    const fontPath = path.join(process.cwd(), \"assets\", \"fonts\", \"Inter-Regular.ttf\");\n    try {\n        if (canvas?.GlobalFonts?.registerFromPath) {\n            canvas.GlobalFonts.registerFromPath(fontPath, \"Arial\");\n            canvas.GlobalFonts.registerFromPath(fontPath, \"sans-serif\");\n            return;\n        }\n        if (typeof canvas?.registerFont === \"function\") {\n            canvas.registerFont(fontPath, {\n                family: \"Arial\"\n            });\n            canvas.registerFont(fontPath, {\n                family: \"sans-serif\"\n            });\n        }\n    } catch  {\n    // If registration fails we still render sprites; text falls back to runtime fonts.\n    }\n}\nregisterFallbackFont();\nmodule.exports = canvas;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2FudmFzLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxPQUFPQyxtQkFBT0EsQ0FBQyxrQkFBTTtBQUUzQixJQUFJQztBQUVKLElBQUk7SUFDRkEsU0FBU0QsbUJBQU9BLENBQUMsd0NBQWlCO0FBQ3BDLEVBQUUsT0FBT0UsS0FBSztJQUNaLElBQUk7UUFDRkQsU0FBU0QsbUJBQU9BLENBQUMsc0JBQVE7SUFDM0IsRUFBRSxPQUFNO1FBQ04sTUFBTUU7SUFDUjtBQUNGO0FBRUEsU0FBU0M7SUFDUCxNQUFNQyxXQUFXTCxLQUFLTSxJQUFJLENBQUNDLFFBQVFDLEdBQUcsSUFBSSxVQUFVLFNBQVM7SUFFN0QsSUFBSTtRQUNGLElBQUlOLFFBQVFPLGFBQWFDLGtCQUFrQjtZQUN6Q1IsT0FBT08sV0FBVyxDQUFDQyxnQkFBZ0IsQ0FBQ0wsVUFBVTtZQUM5Q0gsT0FBT08sV0FBVyxDQUFDQyxnQkFBZ0IsQ0FBQ0wsVUFBVTtZQUM5QztRQUNGO1FBRUEsSUFBSSxPQUFPSCxRQUFRUyxpQkFBaUIsWUFBWTtZQUM5Q1QsT0FBT1MsWUFBWSxDQUFDTixVQUFVO2dCQUFFTyxRQUFRO1lBQVE7WUFDaERWLE9BQU9TLFlBQVksQ0FBQ04sVUFBVTtnQkFBRU8sUUFBUTtZQUFhO1FBQ3ZEO0lBQ0YsRUFBRSxPQUFNO0lBQ04sbUZBQW1GO0lBQ3JGO0FBQ0Y7QUFFQVI7QUFFQVMsT0FBT0MsT0FBTyxHQUFHWiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwb3J0ZVxcRG93bmxvYWRzXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxsaWJcXGNhbnZhcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XG5cbmxldCBjYW52YXM7XG5cbnRyeSB7XG4gIGNhbnZhcyA9IHJlcXVpcmUoXCJAbmFwaS1ycy9jYW52YXNcIik7XG59IGNhdGNoIChlcnIpIHtcbiAgdHJ5IHtcbiAgICBjYW52YXMgPSByZXF1aXJlKFwiY2FudmFzXCIpO1xuICB9IGNhdGNoIHtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJGYWxsYmFja0ZvbnQoKSB7XG4gIGNvbnN0IGZvbnRQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiYXNzZXRzXCIsIFwiZm9udHNcIiwgXCJJbnRlci1SZWd1bGFyLnR0ZlwiKTtcblxuICB0cnkge1xuICAgIGlmIChjYW52YXM/Lkdsb2JhbEZvbnRzPy5yZWdpc3RlckZyb21QYXRoKSB7XG4gICAgICBjYW52YXMuR2xvYmFsRm9udHMucmVnaXN0ZXJGcm9tUGF0aChmb250UGF0aCwgXCJBcmlhbFwiKTtcbiAgICAgIGNhbnZhcy5HbG9iYWxGb250cy5yZWdpc3RlckZyb21QYXRoKGZvbnRQYXRoLCBcInNhbnMtc2VyaWZcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjYW52YXM/LnJlZ2lzdGVyRm9udCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYW52YXMucmVnaXN0ZXJGb250KGZvbnRQYXRoLCB7IGZhbWlseTogXCJBcmlhbFwiIH0pO1xuICAgICAgY2FudmFzLnJlZ2lzdGVyRm9udChmb250UGF0aCwgeyBmYW1pbHk6IFwic2Fucy1zZXJpZlwiIH0pO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gSWYgcmVnaXN0cmF0aW9uIGZhaWxzIHdlIHN0aWxsIHJlbmRlciBzcHJpdGVzOyB0ZXh0IGZhbGxzIGJhY2sgdG8gcnVudGltZSBmb250cy5cbiAgfVxufVxuXG5yZWdpc3RlckZhbGxiYWNrRm9udCgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbnZhcztcbiJdLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImNhbnZhcyIsImVyciIsInJlZ2lzdGVyRmFsbGJhY2tGb250IiwiZm9udFBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsIkdsb2JhbEZvbnRzIiwicmVnaXN0ZXJGcm9tUGF0aCIsInJlZ2lzdGVyRm9udCIsImZhbWlseSIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/canvas.js\n");

/***/ }),

/***/ "(rsc)/./lib/config.js":
/*!***********************!*\
  !*** ./lib/config.js ***!
  \***********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst path = __webpack_require__(/*! path */ \"path\");\nlet runtimeAssetBaseUrl = null;\nconst API_VERSION = \"45\";\nfunction normalizeBaseUrl(url) {\n    if (!url || typeof url !== \"string\") return null;\n    return url.replace(/\\/+$/, \"\");\n}\nfunction setAssetBaseUrl(url) {\n    runtimeAssetBaseUrl = normalizeBaseUrl(url);\n}\nfunction inferAssetBaseUrl() {\n    if (runtimeAssetBaseUrl) return runtimeAssetBaseUrl;\n    if (process.env.ASSET_BASE_URL) return normalizeBaseUrl(process.env.ASSET_BASE_URL);\n    if (process.env.VERCEL_URL) return normalizeBaseUrl(`https://${process.env.VERCEL_URL}`);\n    return null;\n}\nfunction assetPath(relativePath) {\n    const normalized = String(relativePath || \"\").replace(/^\\/+/, \"\").replace(/\\\\/g, \"/\");\n    const publicPath = path.join(process.cwd(), \"public\", normalized);\n    if (fs.existsSync(publicPath)) {\n        return publicPath;\n    }\n    const baseUrl = inferAssetBaseUrl();\n    if (baseUrl) {\n        return `${baseUrl}/${normalized}`;\n    }\n    return path.join(process.cwd(), normalized);\n}\nconst PLACEHOLDER_SPRITE = assetPath(\"i-dunno.png\");\nconst PLACEHOLDER_PERK = assetPath(\"i-dunno.png\");\nconst BASE_CANVAS_WIDTH = 1250;\nconst WIN_PERCENT_COLUMN_WIDTH = 260;\nconst FOOTER_HEIGHT = 60;\nconst CANVAS_WIDTH = BASE_CANVAS_WIDTH + WIN_PERCENT_COLUMN_WIDTH;\nconst LUCK_DRAW_WEIGHT = 0.7;\nconst LUCK_POINTS_MULTIPLIER = 10;\nconst LUCK_POINTS_CLIP = 50;\nconst PET_WIDTH = 50;\nconst BATTLE_HEIGHT = 125;\nconst A_DAY_IN_MS = 1000 * 60 * 60 * 24;\nconst BATTLE_OUTCOMES = {\n    WIN: 1,\n    LOSS: 2,\n    TIE: 3\n};\nconst PACK_MAP = {\n    0: \"Turtle\",\n    1: \"Puppy\",\n    2: \"Star\",\n    3: \"Custom\",\n    4: \"Weekly\",\n    5: \"Golden\",\n    6: \"Unicorn\",\n    7: \"Danger\"\n};\nmodule.exports = {\n    API_VERSION,\n    assetPath,\n    setAssetBaseUrl,\n    PLACEHOLDER_SPRITE,\n    PLACEHOLDER_PERK,\n    BASE_CANVAS_WIDTH,\n    WIN_PERCENT_COLUMN_WIDTH,\n    FOOTER_HEIGHT,\n    CANVAS_WIDTH,\n    LUCK_DRAW_WEIGHT,\n    LUCK_POINTS_MULTIPLIER,\n    LUCK_POINTS_CLIP,\n    PET_WIDTH,\n    BATTLE_HEIGHT,\n    A_DAY_IN_MS,\n    BATTLE_OUTCOMES,\n    PACK_MAP\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxLQUFLQyxtQkFBT0EsQ0FBQyxjQUFJO0FBQ3ZCLE1BQU1DLE9BQU9ELG1CQUFPQSxDQUFDLGtCQUFNO0FBRTNCLElBQUlFLHNCQUFzQjtBQUUxQixNQUFNQyxjQUFjO0FBRXBCLFNBQVNDLGlCQUFpQkMsR0FBRztJQUMzQixJQUFJLENBQUNBLE9BQU8sT0FBT0EsUUFBUSxVQUFVLE9BQU87SUFDNUMsT0FBT0EsSUFBSUMsT0FBTyxDQUFDLFFBQVE7QUFDN0I7QUFFQSxTQUFTQyxnQkFBZ0JGLEdBQUc7SUFDMUJILHNCQUFzQkUsaUJBQWlCQztBQUN6QztBQUVBLFNBQVNHO0lBQ1AsSUFBSU4scUJBQXFCLE9BQU9BO0lBQ2hDLElBQUlPLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxFQUFFLE9BQU9QLGlCQUFpQkssUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0lBQ2xGLElBQUlGLFFBQVFDLEdBQUcsQ0FBQ0UsVUFBVSxFQUFFLE9BQU9SLGlCQUFpQixDQUFDLFFBQVEsRUFBRUssUUFBUUMsR0FBRyxDQUFDRSxVQUFVLEVBQUU7SUFDdkYsT0FBTztBQUNUO0FBRUEsU0FBU0MsVUFBVUMsWUFBWTtJQUM3QixNQUFNQyxhQUFhQyxPQUFPRixnQkFBZ0IsSUFDdkNSLE9BQU8sQ0FBQyxRQUFRLElBQ2hCQSxPQUFPLENBQUMsT0FBTztJQUVsQixNQUFNVyxhQUFhaEIsS0FBS2lCLElBQUksQ0FBQ1QsUUFBUVUsR0FBRyxJQUFJLFVBQVVKO0lBQ3RELElBQUloQixHQUFHcUIsVUFBVSxDQUFDSCxhQUFhO1FBQzdCLE9BQU9BO0lBQ1Q7SUFFQSxNQUFNSSxVQUFVYjtJQUNoQixJQUFJYSxTQUFTO1FBQ1gsT0FBTyxHQUFHQSxRQUFRLENBQUMsRUFBRU4sWUFBWTtJQUNuQztJQUVBLE9BQU9kLEtBQUtpQixJQUFJLENBQUNULFFBQVFVLEdBQUcsSUFBSUo7QUFDbEM7QUFFQSxNQUFNTyxxQkFBcUJULFVBQVU7QUFDckMsTUFBTVUsbUJBQW1CVixVQUFVO0FBRW5DLE1BQU1XLG9CQUFvQjtBQUMxQixNQUFNQywyQkFBMkI7QUFDakMsTUFBTUMsZ0JBQWdCO0FBQ3RCLE1BQU1DLGVBQWVILG9CQUFvQkM7QUFDekMsTUFBTUcsbUJBQW1CO0FBQ3pCLE1BQU1DLHlCQUF5QjtBQUMvQixNQUFNQyxtQkFBbUI7QUFDekIsTUFBTUMsWUFBWTtBQUNsQixNQUFNQyxnQkFBZ0I7QUFFdEIsTUFBTUMsY0FBYyxPQUFPLEtBQUssS0FBSztBQUVyQyxNQUFNQyxrQkFBa0I7SUFDdEJDLEtBQUs7SUFDTEMsTUFBTTtJQUNOQyxLQUFLO0FBQ1A7QUFFQSxNQUFNQyxXQUFXO0lBQ2YsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsR0FBRztJQUNILEdBQUc7QUFDTDtBQUVBQyxPQUFPQyxPQUFPLEdBQUc7SUFDZnJDO0lBQ0FVO0lBQ0FOO0lBQ0FlO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FDO0lBQ0FJO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccG9ydGVcXERvd25sb2Fkc1xcc2FwLXJlcGxheS1ib3QtbWFpblxcc2FwLXJlcGxheS1ib3QtbWFpblxcbGliXFxjb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XG5cbmxldCBydW50aW1lQXNzZXRCYXNlVXJsID0gbnVsbDtcblxuY29uc3QgQVBJX1ZFUlNJT04gPSBcIjQ1XCI7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUJhc2VVcmwodXJsKSB7XG4gIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHJldHVybiBudWxsO1xuICByZXR1cm4gdXJsLnJlcGxhY2UoL1xcLyskLywgXCJcIik7XG59XG5cbmZ1bmN0aW9uIHNldEFzc2V0QmFzZVVybCh1cmwpIHtcbiAgcnVudGltZUFzc2V0QmFzZVVybCA9IG5vcm1hbGl6ZUJhc2VVcmwodXJsKTtcbn1cblxuZnVuY3Rpb24gaW5mZXJBc3NldEJhc2VVcmwoKSB7XG4gIGlmIChydW50aW1lQXNzZXRCYXNlVXJsKSByZXR1cm4gcnVudGltZUFzc2V0QmFzZVVybDtcbiAgaWYgKHByb2Nlc3MuZW52LkFTU0VUX0JBU0VfVVJMKSByZXR1cm4gbm9ybWFsaXplQmFzZVVybChwcm9jZXNzLmVudi5BU1NFVF9CQVNFX1VSTCk7XG4gIGlmIChwcm9jZXNzLmVudi5WRVJDRUxfVVJMKSByZXR1cm4gbm9ybWFsaXplQmFzZVVybChgaHR0cHM6Ly8ke3Byb2Nlc3MuZW52LlZFUkNFTF9VUkx9YCk7XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBhc3NldFBhdGgocmVsYXRpdmVQYXRoKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBTdHJpbmcocmVsYXRpdmVQYXRoIHx8IFwiXCIpXG4gICAgLnJlcGxhY2UoL15cXC8rLywgXCJcIilcbiAgICAucmVwbGFjZSgvXFxcXC9nLCBcIi9cIik7XG5cbiAgY29uc3QgcHVibGljUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcInB1YmxpY1wiLCBub3JtYWxpemVkKTtcbiAgaWYgKGZzLmV4aXN0c1N5bmMocHVibGljUGF0aCkpIHtcbiAgICByZXR1cm4gcHVibGljUGF0aDtcbiAgfVxuXG4gIGNvbnN0IGJhc2VVcmwgPSBpbmZlckFzc2V0QmFzZVVybCgpO1xuICBpZiAoYmFzZVVybCkge1xuICAgIHJldHVybiBgJHtiYXNlVXJsfS8ke25vcm1hbGl6ZWR9YDtcbiAgfVxuXG4gIHJldHVybiBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgbm9ybWFsaXplZCk7XG59XG5cbmNvbnN0IFBMQUNFSE9MREVSX1NQUklURSA9IGFzc2V0UGF0aChcImktZHVubm8ucG5nXCIpO1xuY29uc3QgUExBQ0VIT0xERVJfUEVSSyA9IGFzc2V0UGF0aChcImktZHVubm8ucG5nXCIpO1xuXG5jb25zdCBCQVNFX0NBTlZBU19XSURUSCA9IDEyNTA7XG5jb25zdCBXSU5fUEVSQ0VOVF9DT0xVTU5fV0lEVEggPSAyNjA7XG5jb25zdCBGT09URVJfSEVJR0hUID0gNjA7XG5jb25zdCBDQU5WQVNfV0lEVEggPSBCQVNFX0NBTlZBU19XSURUSCArIFdJTl9QRVJDRU5UX0NPTFVNTl9XSURUSDtcbmNvbnN0IExVQ0tfRFJBV19XRUlHSFQgPSAwLjc7XG5jb25zdCBMVUNLX1BPSU5UU19NVUxUSVBMSUVSID0gMTA7XG5jb25zdCBMVUNLX1BPSU5UU19DTElQID0gNTA7XG5jb25zdCBQRVRfV0lEVEggPSA1MDtcbmNvbnN0IEJBVFRMRV9IRUlHSFQgPSAxMjU7XG5cbmNvbnN0IEFfREFZX0lOX01TID0gMTAwMCAqIDYwICogNjAgKiAyNDtcblxuY29uc3QgQkFUVExFX09VVENPTUVTID0ge1xuICBXSU46IDEsXG4gIExPU1M6IDIsXG4gIFRJRTogM1xufTtcblxuY29uc3QgUEFDS19NQVAgPSB7XG4gIDA6IFwiVHVydGxlXCIsXG4gIDE6IFwiUHVwcHlcIixcbiAgMjogXCJTdGFyXCIsXG4gIDM6IFwiQ3VzdG9tXCIsXG4gIDQ6IFwiV2Vla2x5XCIsXG4gIDU6IFwiR29sZGVuXCIsXG4gIDY6IFwiVW5pY29yblwiLFxuICA3OiBcIkRhbmdlclwiXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQVBJX1ZFUlNJT04sXG4gIGFzc2V0UGF0aCxcbiAgc2V0QXNzZXRCYXNlVXJsLFxuICBQTEFDRUhPTERFUl9TUFJJVEUsXG4gIFBMQUNFSE9MREVSX1BFUkssXG4gIEJBU0VfQ0FOVkFTX1dJRFRILFxuICBXSU5fUEVSQ0VOVF9DT0xVTU5fV0lEVEgsXG4gIEZPT1RFUl9IRUlHSFQsXG4gIENBTlZBU19XSURUSCxcbiAgTFVDS19EUkFXX1dFSUdIVCxcbiAgTFVDS19QT0lOVFNfTVVMVElQTElFUixcbiAgTFVDS19QT0lOVFNfQ0xJUCxcbiAgUEVUX1dJRFRILFxuICBCQVRUTEVfSEVJR0hULFxuICBBX0RBWV9JTl9NUyxcbiAgQkFUVExFX09VVENPTUVTLFxuICBQQUNLX01BUFxufTtcclxuIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsInBhdGgiLCJydW50aW1lQXNzZXRCYXNlVXJsIiwiQVBJX1ZFUlNJT04iLCJub3JtYWxpemVCYXNlVXJsIiwidXJsIiwicmVwbGFjZSIsInNldEFzc2V0QmFzZVVybCIsImluZmVyQXNzZXRCYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIkFTU0VUX0JBU0VfVVJMIiwiVkVSQ0VMX1VSTCIsImFzc2V0UGF0aCIsInJlbGF0aXZlUGF0aCIsIm5vcm1hbGl6ZWQiLCJTdHJpbmciLCJwdWJsaWNQYXRoIiwiam9pbiIsImN3ZCIsImV4aXN0c1N5bmMiLCJiYXNlVXJsIiwiUExBQ0VIT0xERVJfU1BSSVRFIiwiUExBQ0VIT0xERVJfUEVSSyIsIkJBU0VfQ0FOVkFTX1dJRFRIIiwiV0lOX1BFUkNFTlRfQ09MVU1OX1dJRFRIIiwiRk9PVEVSX0hFSUdIVCIsIkNBTlZBU19XSURUSCIsIkxVQ0tfRFJBV19XRUlHSFQiLCJMVUNLX1BPSU5UU19NVUxUSVBMSUVSIiwiTFVDS19QT0lOVFNfQ0xJUCIsIlBFVF9XSURUSCIsIkJBVFRMRV9IRUlHSFQiLCJBX0RBWV9JTl9NUyIsIkJBVFRMRV9PVVRDT01FUyIsIldJTiIsIkxPU1MiLCJUSUUiLCJQQUNLX01BUCIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/config.js\n");

/***/ }),

/***/ "(rsc)/./lib/data.js":
/*!*********************!*\
  !*** ./lib/data.js ***!
  \*********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst path = __webpack_require__(/*! path */ \"path\");\nconst rawPets = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'pets.json')));\nconst PETS = {};\nfor (const pet of rawPets){\n    PETS[pet.Id] = pet;\n}\nconst rawPerks = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'perks.json')));\nconst PERKS = {};\nfor (const perk of rawPerks){\n    PERKS[perk.Id] = perk;\n}\nconst rawToys = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'toys.json')));\nconst TOYS = {};\nfor (const toy of rawToys){\n    TOYS[toy.Id] = toy;\n}\nmodule.exports = {\n    PETS,\n    PERKS,\n    TOYS\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGF0YS5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsS0FBS0MsbUJBQU9BLENBQUMsY0FBSTtBQUN2QixNQUFNQyxPQUFPRCxtQkFBT0EsQ0FBQyxrQkFBTTtBQUUzQixNQUFNRSxVQUFVQyxLQUFLQyxLQUFLLENBQUNMLEdBQUdNLFlBQVksQ0FBQ0osS0FBS0ssSUFBSSxDQUFDQyxRQUFRQyxHQUFHLElBQUk7QUFDcEUsTUFBTUMsT0FBTyxDQUFDO0FBQ2QsS0FBSyxNQUFNQyxPQUFPUixRQUFTO0lBQ3pCTyxJQUFJLENBQUNDLElBQUlDLEVBQUUsQ0FBQyxHQUFHRDtBQUNqQjtBQUVBLE1BQU1FLFdBQVdULEtBQUtDLEtBQUssQ0FBQ0wsR0FBR00sWUFBWSxDQUFDSixLQUFLSyxJQUFJLENBQUNDLFFBQVFDLEdBQUcsSUFBSTtBQUNyRSxNQUFNSyxRQUFRLENBQUM7QUFDZixLQUFLLE1BQU1DLFFBQVFGLFNBQVU7SUFDM0JDLEtBQUssQ0FBQ0MsS0FBS0gsRUFBRSxDQUFDLEdBQUdHO0FBQ25CO0FBRUEsTUFBTUMsVUFBVVosS0FBS0MsS0FBSyxDQUFDTCxHQUFHTSxZQUFZLENBQUNKLEtBQUtLLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxJQUFJO0FBQ3BFLE1BQU1RLE9BQU8sQ0FBQztBQUNkLEtBQUssTUFBTUMsT0FBT0YsUUFBUztJQUN6QkMsSUFBSSxDQUFDQyxJQUFJTixFQUFFLENBQUMsR0FBR007QUFDakI7QUFFQUMsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZWO0lBQ0FJO0lBQ0FHO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccG9ydGVcXERvd25sb2Fkc1xcc2FwLXJlcGxheS1ib3QtbWFpblxcc2FwLXJlcGxheS1ib3QtbWFpblxcbGliXFxkYXRhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbmNvbnN0IHJhd1BldHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3BldHMuanNvbicpKSk7XG5jb25zdCBQRVRTID0ge307XG5mb3IgKGNvbnN0IHBldCBvZiByYXdQZXRzKSB7XG4gIFBFVFNbcGV0LklkXSA9IHBldDtcbn1cblxuY29uc3QgcmF3UGVya3MgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3BlcmtzLmpzb24nKSkpO1xuY29uc3QgUEVSS1MgPSB7fTtcbmZvciAoY29uc3QgcGVyayBvZiByYXdQZXJrcykge1xuICBQRVJLU1twZXJrLklkXSA9IHBlcms7XG59XG5cbmNvbnN0IHJhd1RveXMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3RveXMuanNvbicpKSk7XG5jb25zdCBUT1lTID0ge307XG5mb3IgKGNvbnN0IHRveSBvZiByYXdUb3lzKSB7XG4gIFRPWVNbdG95LklkXSA9IHRveTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFBFVFMsXG4gIFBFUktTLFxuICBUT1lTXG59O1xuIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsInBhdGgiLCJyYXdQZXRzIiwiSlNPTiIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJQRVRTIiwicGV0IiwiSWQiLCJyYXdQZXJrcyIsIlBFUktTIiwicGVyayIsInJhd1RveXMiLCJUT1lTIiwidG95IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/data.js\n");

/***/ }),

/***/ "(rsc)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pool: () => (/* binding */ pool)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst globalForDb = globalThis;\nconst pool = globalForDb.pgPool || new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    connectionString: process.env.DATABASE_URL\n});\nif (!globalForDb.pgPool) {\n    globalForDb.pgPool = pool;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMEI7QUFFMUIsTUFBTUMsY0FBY0M7QUFFYixNQUFNQyxPQUFPRixZQUFZRyxNQUFNLElBQUksSUFBSUosb0NBQUlBLENBQUM7SUFDakRLLGtCQUFrQkMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0FBQzVDLEdBQUc7QUFFSCxJQUFJLENBQUNQLFlBQVlHLE1BQU0sRUFBRTtJQUN2QkgsWUFBWUcsTUFBTSxHQUFHRDtBQUN2QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwb3J0ZVxcRG93bmxvYWRzXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxsaWJcXGRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvb2wgfSBmcm9tIFwicGdcIjtcblxuY29uc3QgZ2xvYmFsRm9yRGIgPSBnbG9iYWxUaGlzO1xuXG5leHBvcnQgY29uc3QgcG9vbCA9IGdsb2JhbEZvckRiLnBnUG9vbCB8fCBuZXcgUG9vbCh7XG4gIGNvbm5lY3Rpb25TdHJpbmc6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTFxufSk7XG5cbmlmICghZ2xvYmFsRm9yRGIucGdQb29sKSB7XG4gIGdsb2JhbEZvckRiLnBnUG9vbCA9IHBvb2w7XG59XHJcbiJdLCJuYW1lcyI6WyJQb29sIiwiZ2xvYmFsRm9yRGIiLCJnbG9iYWxUaGlzIiwicG9vbCIsInBnUG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfVVJMIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.js\n");

/***/ }),

/***/ "(rsc)/./lib/drawing.js":
/*!************************!*\
  !*** ./lib/drawing.js ***!
  \************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst Canvas = __webpack_require__(/*! ./canvas */ \"(rsc)/./lib/canvas.js\");\nconst { PET_WIDTH, PLACEHOLDER_SPRITE, PLACEHOLDER_PERK } = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.js\");\nasync function loadImageSafe(imagePath, fallbackPath) {\n    const candidate = typeof imagePath === \"string\" && imagePath.trim() ? imagePath : fallbackPath;\n    try {\n        return await Canvas.loadImage(candidate);\n    } catch  {\n        if (candidate !== fallbackPath) {\n            return Canvas.loadImage(fallbackPath);\n        }\n        throw new Error(\"failed to load image and fallback\");\n    }\n}\nfunction safeFillText(ctx, value, x, y) {\n    const text = value === null || value === undefined ? \"\" : String(value);\n    ctx.fillText(text, x, y);\n}\nasync function drawPet(ctx, petJSON, x, y, flip) {\n    const asNum = (value, fallback = 0)=>{\n        const n = Number(value);\n        return Number.isFinite(n) ? n : fallback;\n    };\n    const asText = (value, fallback = \"\")=>{\n        if (value === null || value === undefined) return fallback;\n        return String(value);\n    };\n    const attack = asNum(petJSON?.attack);\n    const tempAttack = asNum(petJSON?.tempAttack);\n    const health = asNum(petJSON?.health);\n    const tempHealth = asNum(petJSON?.tempHealth);\n    const level = asNum(petJSON?.level, 1);\n    const xp = asNum(petJSON?.xp, 0);\n    const petImage = await loadImageSafe(petJSON?.imagePath, PLACEHOLDER_SPRITE);\n    if (flip) {\n        ctx.save();\n        ctx.scale(-1, 1);\n        ctx.drawImage(petImage, -(x + PET_WIDTH), y, PET_WIDTH, PET_WIDTH);\n        ctx.restore();\n    } else {\n        ctx.drawImage(petImage, x, y, PET_WIDTH, PET_WIDTH);\n    }\n    if (petJSON.perk) {\n        const perkImage = await loadImageSafe(petJSON?.perkImagePath, PLACEHOLDER_PERK);\n        ctx.drawImage(perkImage, x + 30, y - 10, 30, 30);\n    }\n    ctx.font = \"18px Arial\";\n    ctx.fillStyle = \"green\";\n    safeFillText(ctx, asText(attack + tempAttack, \"0\"), x + PET_WIDTH / 4, y + PET_WIDTH + 20);\n    ctx.fillStyle = \"red\";\n    safeFillText(ctx, asText(health + tempHealth, \"0\"), x + 3 * PET_WIDTH / 4, y + PET_WIDTH + 20);\n    ctx.font = \"12px Arial\";\n    ctx.fillStyle = \"grey\";\n    safeFillText(ctx, \"Lvl\", x, y - 6);\n    ctx.font = \"18px Arial\";\n    ctx.fillStyle = \"orange\";\n    safeFillText(ctx, asText(level, \"1\"), x + 18, y - 7.5);\n    if (xp < 2) {\n        for(let i = 0; i < 2; i++){\n            ctx.beginPath();\n            if (i < xp) {\n                ctx.fillStyle = \"orange\";\n            } else {\n                ctx.fillStyle = \"grey\";\n            }\n            ctx.roundRect(x - 9 + i * 16, y - 2, 14, 6, 2);\n            ctx.fill();\n        }\n    } else {\n        for(let i = 0; i < 3; i++){\n            ctx.beginPath();\n            if (i < xp - 2) {\n                ctx.fillStyle = \"orange\";\n            } else {\n                ctx.fillStyle = \"grey\";\n            }\n            ctx.roundRect(x - 9 + i * 12, y - 2, 10, 6, 2);\n            ctx.fill();\n        }\n    }\n}\nasync function drawToy(ctx, toyJSON, x, y) {\n    if (!toyJSON?.imagePath) return;\n    const toyImage = await loadImageSafe(toyJSON.imagePath, PLACEHOLDER_SPRITE);\n    ctx.drawImage(toyImage, x, y, PET_WIDTH, PET_WIDTH);\n    ctx.fillStyle = \"black\";\n    ctx.font = \"12px Arial\";\n    safeFillText(ctx, `Lv${toyJSON.level}`, x + PET_WIDTH / 2, y + 3 * PET_WIDTH / 2);\n}\nmodule.exports = {\n    drawPet,\n    drawToy\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSWQsWUFBWTtBQUNqRjtBQUVBbUQsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZqQztJQUNBNkI7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwb3J0ZVxcRG93bmxvYWRzXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxsaWJcXGRyYXdpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQ2FudmFzID0gcmVxdWlyZShcIi4vY2FudmFzXCIpO1xuY29uc3QgeyBQRVRfV0lEVEgsIFBMQUNFSE9MREVSX1NQUklURSwgUExBQ0VIT0xERVJfUEVSSyB9ID0gcmVxdWlyZShcIi4vY29uZmlnXCIpO1xuXG5hc3luYyBmdW5jdGlvbiBsb2FkSW1hZ2VTYWZlKGltYWdlUGF0aCwgZmFsbGJhY2tQYXRoKSB7XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHR5cGVvZiBpbWFnZVBhdGggPT09IFwic3RyaW5nXCIgJiYgaW1hZ2VQYXRoLnRyaW0oKVxuICAgID8gaW1hZ2VQYXRoXG4gICAgOiBmYWxsYmFja1BhdGg7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IENhbnZhcy5sb2FkSW1hZ2UoY2FuZGlkYXRlKTtcbiAgfSBjYXRjaCB7XG4gICAgaWYgKGNhbmRpZGF0ZSAhPT0gZmFsbGJhY2tQYXRoKSB7XG4gICAgICByZXR1cm4gQ2FudmFzLmxvYWRJbWFnZShmYWxsYmFja1BhdGgpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmYWlsZWQgdG8gbG9hZCBpbWFnZSBhbmQgZmFsbGJhY2tcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2FmZUZpbGxUZXh0KGN0eCwgdmFsdWUsIHgsIHkpIHtcbiAgY29uc3QgdGV4dCA9IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgPyBcIlwiIDogU3RyaW5nKHZhbHVlKTtcbiAgY3R4LmZpbGxUZXh0KHRleHQsIHgsIHkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBkcmF3UGV0KGN0eCwgcGV0SlNPTiwgeCwgeSwgZmxpcCkge1xuICBjb25zdCBhc051bSA9ICh2YWx1ZSwgZmFsbGJhY2sgPSAwKSA9PiB7XG4gICAgY29uc3QgbiA9IE51bWJlcih2YWx1ZSk7XG4gICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShuKSA/IG4gOiBmYWxsYmFjaztcbiAgfTtcbiAgY29uc3QgYXNUZXh0ID0gKHZhbHVlLCBmYWxsYmFjayA9IFwiXCIpID0+IHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbGxiYWNrO1xuICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICB9O1xuICBjb25zdCBhdHRhY2sgPSBhc051bShwZXRKU09OPy5hdHRhY2spO1xuICBjb25zdCB0ZW1wQXR0YWNrID0gYXNOdW0ocGV0SlNPTj8udGVtcEF0dGFjayk7XG4gIGNvbnN0IGhlYWx0aCA9IGFzTnVtKHBldEpTT04/LmhlYWx0aCk7XG4gIGNvbnN0IHRlbXBIZWFsdGggPSBhc051bShwZXRKU09OPy50ZW1wSGVhbHRoKTtcbiAgY29uc3QgbGV2ZWwgPSBhc051bShwZXRKU09OPy5sZXZlbCwgMSk7XG4gIGNvbnN0IHhwID0gYXNOdW0ocGV0SlNPTj8ueHAsIDApO1xuXG4gIGNvbnN0IHBldEltYWdlID0gYXdhaXQgbG9hZEltYWdlU2FmZShwZXRKU09OPy5pbWFnZVBhdGgsIFBMQUNFSE9MREVSX1NQUklURSk7XG4gIGlmIChmbGlwKSB7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguc2NhbGUoLTEsIDEpO1xuICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICBwZXRJbWFnZSxcbiAgICAgIC0oeCArIFBFVF9XSURUSCksXG4gICAgICB5LFxuICAgICAgUEVUX1dJRFRILFxuICAgICAgUEVUX1dJRFRIXG4gICAgKTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICB9IGVsc2Uge1xuICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICBwZXRJbWFnZSxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgUEVUX1dJRFRILFxuICAgICAgUEVUX1dJRFRIXG4gICAgKTtcbiAgfVxuXG4gIGlmIChwZXRKU09OLnBlcmspIHtcbiAgICBjb25zdCBwZXJrSW1hZ2UgPSBhd2FpdCBsb2FkSW1hZ2VTYWZlKHBldEpTT04/LnBlcmtJbWFnZVBhdGgsIFBMQUNFSE9MREVSX1BFUkspO1xuICAgIGN0eC5kcmF3SW1hZ2UocGVya0ltYWdlLCB4ICsgMzAsIHkgLSAxMCwgMzAsIDMwKTtcbiAgfVxuXG4gIGN0eC5mb250ID0gXCIxOHB4IEFyaWFsXCI7XG4gIGN0eC5maWxsU3R5bGUgPSBcImdyZWVuXCI7XG4gIHNhZmVGaWxsVGV4dChjdHgsIGFzVGV4dChhdHRhY2sgKyB0ZW1wQXR0YWNrLCBcIjBcIiksIHggKyBQRVRfV0lEVEggLyA0LCB5ICsgUEVUX1dJRFRIICsgMjApO1xuICBjdHguZmlsbFN0eWxlID0gXCJyZWRcIjtcbiAgc2FmZUZpbGxUZXh0KGN0eCwgYXNUZXh0KGhlYWx0aCArIHRlbXBIZWFsdGgsIFwiMFwiKSwgeCArIDMgKiBQRVRfV0lEVEggLyA0LCB5ICsgUEVUX1dJRFRIICsgMjApO1xuICBjdHguZm9udCA9IFwiMTJweCBBcmlhbFwiO1xuICBjdHguZmlsbFN0eWxlID0gXCJncmV5XCI7XG4gIHNhZmVGaWxsVGV4dChjdHgsIFwiTHZsXCIsIHgsIHkgLSA2KTtcbiAgY3R4LmZvbnQgPSBcIjE4cHggQXJpYWxcIjtcbiAgY3R4LmZpbGxTdHlsZSA9IFwib3JhbmdlXCI7XG4gIHNhZmVGaWxsVGV4dChjdHgsIGFzVGV4dChsZXZlbCwgXCIxXCIpLCB4ICsgMTgsIHkgLSA3LjUpO1xuXG4gIGlmICh4cCA8IDIpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgaWYgKGkgPCB4cCkge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJvcmFuZ2VcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImdyZXlcIjtcbiAgICAgIH1cbiAgICAgIGN0eC5yb3VuZFJlY3QoeCAtIDkgKyBpICogMTYsIHkgLSAyLCAxNCwgNiwgMik7XG4gICAgICBjdHguZmlsbCgpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgaWYgKGkgPCB4cCAtIDIpIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwib3JhbmdlXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJncmV5XCI7XG4gICAgICB9XG4gICAgICBjdHgucm91bmRSZWN0KHggLSA5ICsgaSAqIDEyLCB5IC0gMiwgMTAsIDYsIDIpO1xuICAgICAgY3R4LmZpbGwoKTtcbiAgICB9XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZHJhd1RveShjdHgsIHRveUpTT04sIHgsIHkpIHtcbiAgaWYgKCF0b3lKU09OPy5pbWFnZVBhdGgpIHJldHVybjtcbiAgY29uc3QgdG95SW1hZ2UgPSBhd2FpdCBsb2FkSW1hZ2VTYWZlKHRveUpTT04uaW1hZ2VQYXRoLCBQTEFDRUhPTERFUl9TUFJJVEUpO1xuICBjdHguZHJhd0ltYWdlKFxuICAgIHRveUltYWdlLFxuICAgIHgsXG4gICAgeSxcbiAgICBQRVRfV0lEVEgsXG4gICAgUEVUX1dJRFRIXG4gICk7XG4gIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gIGN0eC5mb250ID0gXCIxMnB4IEFyaWFsXCI7XG4gIHNhZmVGaWxsVGV4dChjdHgsIGBMdiR7dG95SlNPTi5sZXZlbH1gLCB4ICsgUEVUX1dJRFRIIC8gMiwgeSArIDMgKiBQRVRfV0lEVEggLyAyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRyYXdQZXQsXG4gIGRyYXdUb3lcbn07XG4iXSwibmFtZXMiOlsiQ2FudmFzIiwicmVxdWlyZSIsIlBFVF9XSURUSCIsIlBMQUNFSE9MREVSX1NQUklURSIsIlBMQUNFSE9MREVSX1BFUksiLCJsb2FkSW1hZ2VTYWZlIiwiaW1hZ2VQYXRoIiwiZmFsbGJhY2tQYXRoIiwiY2FuZGlkYXRlIiwidHJpbSIsImxvYWRJbWFnZSIsIkVycm9yIiwic2FmZUZpbGxUZXh0IiwiY3R4IiwidmFsdWUiLCJ4IiwieSIsInRleHQiLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJmaWxsVGV4dCIsImRyYXdQZXQiLCJwZXRKU09OIiwiZmxpcCIsImFzTnVtIiwiZmFsbGJhY2siLCJuIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJhc1RleHQiLCJhdHRhY2siLCJ0ZW1wQXR0YWNrIiwiaGVhbHRoIiwidGVtcEhlYWx0aCIsImxldmVsIiwieHAiLCJwZXRJbWFnZSIsInNhdmUiLCJzY2FsZSIsImRyYXdJbWFnZSIsInJlc3RvcmUiLCJwZXJrIiwicGVya0ltYWdlIiwicGVya0ltYWdlUGF0aCIsImZvbnQiLCJmaWxsU3R5bGUiLCJpIiwiYmVnaW5QYXRoIiwicm91bmRSZWN0IiwiZmlsbCIsImRyYXdUb3kiLCJ0b3lKU09OIiwidG95SW1hZ2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/drawing.js\n");

/***/ }),

/***/ "(rsc)/./lib/luck.js":
/*!*********************!*\
  !*** ./lib/luck.js ***!
  \*********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst { BATTLE_OUTCOMES } = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.js\");\nfunction parsePercentValue(percentText) {\n    if (!percentText) {\n        return null;\n    }\n    const value = Number(String(percentText).replace('%', ''));\n    return Number.isFinite(value) ? value : null;\n}\nfunction getOutcomeChance(winPercent, outcome) {\n    if (!winPercent) {\n        return null;\n    }\n    if (outcome === BATTLE_OUTCOMES.WIN) {\n        return parsePercentValue(winPercent.player);\n    }\n    if (outcome === BATTLE_OUTCOMES.LOSS) {\n        return parsePercentValue(winPercent.opponent);\n    }\n    if (outcome === BATTLE_OUTCOMES.TIE) {\n        return parsePercentValue(winPercent.draw);\n    }\n    return null;\n}\nfunction calcLuckPoints(winPercent, outcome) {\n    if (!winPercent) {\n        return null;\n    }\n    const winValue = parsePercentValue(winPercent.player);\n    const lossValue = parsePercentValue(winPercent.opponent);\n    const drawValue = parsePercentValue(winPercent.draw);\n    if (winValue === null || lossValue === null || drawValue === null) {\n        return null;\n    }\n    const pWin = winValue / 100;\n    const pLoss = lossValue / 100;\n    const pDraw = drawValue / 100;\n    const expectedScore = pWin + 0.5 * pDraw;\n    let actualScore = null;\n    if (outcome === BATTLE_OUTCOMES.WIN) {\n        actualScore = 1;\n    } else if (outcome === BATTLE_OUTCOMES.LOSS) {\n        actualScore = 0;\n    } else if (outcome === BATTLE_OUTCOMES.TIE) {\n        actualScore = 0.5;\n    }\n    if (actualScore === null) {\n        return null;\n    }\n    const rawPoints = actualScore - expectedScore;\n    return {\n        raw: rawPoints\n    };\n}\nmodule.exports = {\n    parsePercentValue,\n    getOutcomeChance,\n    calcLuckPoints\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbHVjay5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxFQUFFQSxlQUFlLEVBQUUsR0FBR0MsbUJBQU9BLENBQUMsdUNBQVU7QUFFOUMsU0FBU0Msa0JBQWtCQyxXQUFXO0lBQ3BDLElBQUksQ0FBQ0EsYUFBYTtRQUNoQixPQUFPO0lBQ1Q7SUFDQSxNQUFNQyxRQUFRQyxPQUFPQyxPQUFPSCxhQUFhSSxPQUFPLENBQUMsS0FBSztJQUN0RCxPQUFPRixPQUFPRyxRQUFRLENBQUNKLFNBQVNBLFFBQVE7QUFDMUM7QUFFQSxTQUFTSyxpQkFBaUJDLFVBQVUsRUFBRUMsT0FBTztJQUMzQyxJQUFJLENBQUNELFlBQVk7UUFDZixPQUFPO0lBQ1Q7SUFDQSxJQUFJQyxZQUFZWCxnQkFBZ0JZLEdBQUcsRUFBRTtRQUNuQyxPQUFPVixrQkFBa0JRLFdBQVdHLE1BQU07SUFDNUM7SUFDQSxJQUFJRixZQUFZWCxnQkFBZ0JjLElBQUksRUFBRTtRQUNwQyxPQUFPWixrQkFBa0JRLFdBQVdLLFFBQVE7SUFDOUM7SUFDQSxJQUFJSixZQUFZWCxnQkFBZ0JnQixHQUFHLEVBQUU7UUFDbkMsT0FBT2Qsa0JBQWtCUSxXQUFXTyxJQUFJO0lBQzFDO0lBQ0EsT0FBTztBQUNUO0FBRUEsU0FBU0MsZUFBZVIsVUFBVSxFQUFFQyxPQUFPO0lBQ3pDLElBQUksQ0FBQ0QsWUFBWTtRQUNmLE9BQU87SUFDVDtJQUVBLE1BQU1TLFdBQVdqQixrQkFBa0JRLFdBQVdHLE1BQU07SUFDcEQsTUFBTU8sWUFBWWxCLGtCQUFrQlEsV0FBV0ssUUFBUTtJQUN2RCxNQUFNTSxZQUFZbkIsa0JBQWtCUSxXQUFXTyxJQUFJO0lBRW5ELElBQUlFLGFBQWEsUUFBUUMsY0FBYyxRQUFRQyxjQUFjLE1BQU07UUFDakUsT0FBTztJQUNUO0lBRUEsTUFBTUMsT0FBT0gsV0FBVztJQUN4QixNQUFNSSxRQUFRSCxZQUFZO0lBQzFCLE1BQU1JLFFBQVFILFlBQVk7SUFFMUIsTUFBTUksZ0JBQWdCSCxPQUFPLE1BQU1FO0lBQ25DLElBQUlFLGNBQWM7SUFDbEIsSUFBSWYsWUFBWVgsZ0JBQWdCWSxHQUFHLEVBQUU7UUFDbkNjLGNBQWM7SUFDaEIsT0FBTyxJQUFJZixZQUFZWCxnQkFBZ0JjLElBQUksRUFBRTtRQUMzQ1ksY0FBYztJQUNoQixPQUFPLElBQUlmLFlBQVlYLGdCQUFnQmdCLEdBQUcsRUFBRTtRQUMxQ1UsY0FBYztJQUNoQjtJQUVBLElBQUlBLGdCQUFnQixNQUFNO1FBQ3hCLE9BQU87SUFDVDtJQUVBLE1BQU1DLFlBQVlELGNBQWNEO0lBQ2hDLE9BQU87UUFDTEcsS0FBS0Q7SUFDUDtBQUNGO0FBRUFFLE9BQU9DLE9BQU8sR0FBRztJQUNmNUI7SUFDQU87SUFDQVM7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwb3J0ZVxcRG93bmxvYWRzXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxsaWJcXGx1Y2suanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBCQVRUTEVfT1VUQ09NRVMgfSA9IHJlcXVpcmUoJy4vY29uZmlnJyk7XG5cbmZ1bmN0aW9uIHBhcnNlUGVyY2VudFZhbHVlKHBlcmNlbnRUZXh0KSB7XG4gIGlmICghcGVyY2VudFRleHQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB2YWx1ZSA9IE51bWJlcihTdHJpbmcocGVyY2VudFRleHQpLnJlcGxhY2UoJyUnLCAnJykpO1xuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHZhbHVlKSA/IHZhbHVlIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0T3V0Y29tZUNoYW5jZSh3aW5QZXJjZW50LCBvdXRjb21lKSB7XG4gIGlmICghd2luUGVyY2VudCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChvdXRjb21lID09PSBCQVRUTEVfT1VUQ09NRVMuV0lOKSB7XG4gICAgcmV0dXJuIHBhcnNlUGVyY2VudFZhbHVlKHdpblBlcmNlbnQucGxheWVyKTtcbiAgfVxuICBpZiAob3V0Y29tZSA9PT0gQkFUVExFX09VVENPTUVTLkxPU1MpIHtcbiAgICByZXR1cm4gcGFyc2VQZXJjZW50VmFsdWUod2luUGVyY2VudC5vcHBvbmVudCk7XG4gIH1cbiAgaWYgKG91dGNvbWUgPT09IEJBVFRMRV9PVVRDT01FUy5USUUpIHtcbiAgICByZXR1cm4gcGFyc2VQZXJjZW50VmFsdWUod2luUGVyY2VudC5kcmF3KTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gY2FsY0x1Y2tQb2ludHMod2luUGVyY2VudCwgb3V0Y29tZSkge1xuICBpZiAoIXdpblBlcmNlbnQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHdpblZhbHVlID0gcGFyc2VQZXJjZW50VmFsdWUod2luUGVyY2VudC5wbGF5ZXIpO1xuICBjb25zdCBsb3NzVmFsdWUgPSBwYXJzZVBlcmNlbnRWYWx1ZSh3aW5QZXJjZW50Lm9wcG9uZW50KTtcbiAgY29uc3QgZHJhd1ZhbHVlID0gcGFyc2VQZXJjZW50VmFsdWUod2luUGVyY2VudC5kcmF3KTtcblxuICBpZiAod2luVmFsdWUgPT09IG51bGwgfHwgbG9zc1ZhbHVlID09PSBudWxsIHx8IGRyYXdWYWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgcFdpbiA9IHdpblZhbHVlIC8gMTAwO1xuICBjb25zdCBwTG9zcyA9IGxvc3NWYWx1ZSAvIDEwMDtcbiAgY29uc3QgcERyYXcgPSBkcmF3VmFsdWUgLyAxMDA7XG5cbiAgY29uc3QgZXhwZWN0ZWRTY29yZSA9IHBXaW4gKyAwLjUgKiBwRHJhdztcbiAgbGV0IGFjdHVhbFNjb3JlID0gbnVsbDtcbiAgaWYgKG91dGNvbWUgPT09IEJBVFRMRV9PVVRDT01FUy5XSU4pIHtcbiAgICBhY3R1YWxTY29yZSA9IDE7XG4gIH0gZWxzZSBpZiAob3V0Y29tZSA9PT0gQkFUVExFX09VVENPTUVTLkxPU1MpIHtcbiAgICBhY3R1YWxTY29yZSA9IDA7XG4gIH0gZWxzZSBpZiAob3V0Y29tZSA9PT0gQkFUVExFX09VVENPTUVTLlRJRSkge1xuICAgIGFjdHVhbFNjb3JlID0gMC41O1xuICB9XG5cbiAgaWYgKGFjdHVhbFNjb3JlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCByYXdQb2ludHMgPSBhY3R1YWxTY29yZSAtIGV4cGVjdGVkU2NvcmU7XG4gIHJldHVybiB7XG4gICAgcmF3OiByYXdQb2ludHNcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHBhcnNlUGVyY2VudFZhbHVlLFxuICBnZXRPdXRjb21lQ2hhbmNlLFxuICBjYWxjTHVja1BvaW50c1xufTtcbiJdLCJuYW1lcyI6WyJCQVRUTEVfT1VUQ09NRVMiLCJyZXF1aXJlIiwicGFyc2VQZXJjZW50VmFsdWUiLCJwZXJjZW50VGV4dCIsInZhbHVlIiwiTnVtYmVyIiwiU3RyaW5nIiwicmVwbGFjZSIsImlzRmluaXRlIiwiZ2V0T3V0Y29tZUNoYW5jZSIsIndpblBlcmNlbnQiLCJvdXRjb21lIiwiV0lOIiwicGxheWVyIiwiTE9TUyIsIm9wcG9uZW50IiwiVElFIiwiZHJhdyIsImNhbGNMdWNrUG9pbnRzIiwid2luVmFsdWUiLCJsb3NzVmFsdWUiLCJkcmF3VmFsdWUiLCJwV2luIiwicExvc3MiLCJwRHJhdyIsImV4cGVjdGVkU2NvcmUiLCJhY3R1YWxTY29yZSIsInJhd1BvaW50cyIsInJhdyIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/luck.js\n");

/***/ }),

/***/ "(rsc)/./lib/render.js":
/*!***********************!*\
  !*** ./lib/render.js ***!
  \***********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst Canvas = __webpack_require__(/*! ./canvas */ \"(rsc)/./lib/canvas.js\");\nconst { drawPet, drawToy } = __webpack_require__(/*! ./drawing */ \"(rsc)/./lib/drawing.js\");\nconst { parsePercentValue, calcLuckPoints } = __webpack_require__(/*! ./luck */ \"(rsc)/./lib/luck.js\");\nconst { BASE_CANVAS_WIDTH, CANVAS_WIDTH, FOOTER_HEIGHT, PET_WIDTH, BATTLE_HEIGHT, BATTLE_OUTCOMES, PLACEHOLDER_SPRITE, PLACEHOLDER_PERK, assetPath } = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.js\");\nasync function loadImageSafe(imagePath, fallbackPath = PLACEHOLDER_SPRITE) {\n    const candidate = typeof imagePath === \"string\" && imagePath.trim() ? imagePath : fallbackPath;\n    try {\n        return await Canvas.loadImage(candidate);\n    } catch  {\n        if (candidate !== fallbackPath) {\n            return Canvas.loadImage(fallbackPath);\n        }\n        throw new Error(\"failed to load image and fallback\");\n    }\n}\nfunction safeFillText(ctx, value, x, y) {\n    const text = value === null || value === undefined ? \"\" : String(value);\n    ctx.fillText(text, x, y);\n}\nfunction hardenTextRendering(ctx) {\n    const originalFillText = ctx.fillText.bind(ctx);\n    ctx.fillText = (value, x, y, maxWidth)=>{\n        const text = value === null || value === undefined ? \"\" : String(value);\n        const px = Number.isFinite(Number(x)) ? Number(x) : 0;\n        const py = Number.isFinite(Number(y)) ? Number(y) : 0;\n        if (maxWidth === null || maxWidth === undefined) {\n            return originalFillText(text, px, py);\n        }\n        const mw = Number.isFinite(Number(maxWidth)) ? Number(maxWidth) : undefined;\n        if (mw === undefined) {\n            return originalFillText(text, px, py);\n        }\n        return originalFillText(text, px, py, mw);\n    };\n}\nasync function renderReplayImage({ battles, battleOpponentInfo, maxLives, includeOdds, winPercentResults, playerName, headerOpponentName }) {\n    const missingTurns = includeOdds ? winPercentResults.map((result, index)=>{\n        if (!result || !result.player || !result.opponent || !result.draw) {\n            return index + 1;\n        }\n        return null;\n    }).filter((value)=>value !== null) : [];\n    const hasUnknownData = battles.some((battle)=>{\n        const allPets = [\n            ...battle.playerBoard?.boardPets || [],\n            ...battle.oppBoard?.boardPets || []\n        ];\n        return allPets.some((pet)=>{\n            if (!pet) {\n                return false;\n            }\n            if (pet.name === \"Token Pet\") {\n                return false;\n            }\n            const hasUnknownSprite = pet.imagePath === PLACEHOLDER_SPRITE;\n            const hasUnknownPerk = pet.perkImagePath === PLACEHOLDER_PERK || pet.perk === \"UNKNOWN PERK\";\n            return hasUnknownSprite || hasUnknownPerk;\n        });\n    });\n    const canvasWidth = includeOdds ? CANVAS_WIDTH : BASE_CANVAS_WIDTH;\n    const footerHeight = includeOdds ? FOOTER_HEIGHT : 0;\n    const headerHeight = playerName && headerOpponentName ? 36 : 0;\n    const canvas = Canvas.createCanvas(canvasWidth, headerHeight + battles.length * BATTLE_HEIGHT + footerHeight);\n    const ctx = canvas.getContext(\"2d\");\n    hardenTextRendering(ctx);\n    ctx.textAlign = \"center\";\n    ctx.fillStyle = \"#FFFFFF\";\n    ctx.fillRect(0, 0, canvasWidth, headerHeight + battles.length * BATTLE_HEIGHT + footerHeight);\n    ctx.font = \"18px Arial\";\n    const headerOffset = headerHeight;\n    if (headerHeight) {\n        ctx.fillStyle = \"#000000\";\n        ctx.font = \"18px Arial\";\n        ctx.textAlign = \"center\";\n        safeFillText(ctx, `${playerName} vs ${headerOpponentName}`, canvasWidth / 2, 24);\n    }\n    const turnNumberIconSize = (25 + PET_WIDTH) * 2;\n    const livesIconSize = 15 + PET_WIDTH;\n    const hourglassIcon = await loadImageSafe(assetPath(\"hourglass-twemoji.png\"));\n    const heartIcon = await loadImageSafe(assetPath(\"heart-twemoji.png\"));\n    let totalLuckPoints = 0;\n    let luckSamples = 0;\n    let currentLives = maxLives;\n    const findOpponentInfo = (index, opponentName)=>{\n        for(let idx = index; idx >= 0; idx--){\n            const infoList = battleOpponentInfo[idx];\n            if (!infoList) {\n                continue;\n            }\n            const match = infoList.find((opponent)=>opponent.DisplayName === opponentName);\n            if (match) {\n                return match;\n            }\n        }\n        return null;\n    };\n    for(let i = 0; i < battles.length; i++){\n        // Turn 3 (shows up turn 4) life regain\n        if (i === 2 && currentLives < maxLives) {\n            currentLives++;\n        }\n        const rowStartY = headerOffset + i * BATTLE_HEIGHT;\n        const baseYPosition = rowStartY + 25;\n        const winPercent = winPercentResults[i] || null;\n        const winValue = winPercent ? parsePercentValue(winPercent.player) : null;\n        const isGaped = battles[i].outcome === BATTLE_OUTCOMES.WIN && winValue !== null && winValue <= 5;\n        ctx.fillStyle = \"#FFFFFF\";\n        if (isGaped) {\n            ctx.fillStyle = \"#F4D35E\";\n        } else {\n            switch(battles[i].outcome){\n                case BATTLE_OUTCOMES.WIN:\n                    ctx.fillStyle = \"#E6F4EA\";\n                    break;\n                case BATTLE_OUTCOMES.LOSS:\n                    ctx.fillStyle = \"#FDECEA\";\n                    break;\n                case BATTLE_OUTCOMES.TIE:\n                    ctx.fillStyle = \"#F2F2F2\";\n                    break;\n                default:\n                    ctx.fillStyle = \"#FFFFFF\";\n            }\n        }\n        ctx.fillRect(0, rowStartY, canvasWidth, BATTLE_HEIGHT);\n        // Draw Turn\n        ctx.drawImage(hourglassIcon, 25, baseYPosition, PET_WIDTH, PET_WIDTH);\n        ctx.fillStyle = \"black\";\n        ctx.font = \"24px Arial\";\n        safeFillText(ctx, i + 1, 25 + PET_WIDTH + 15, baseYPosition + PET_WIDTH / 2 + 6);\n        // Draw Player Lives\n        ctx.drawImage(heartIcon, turnNumberIconSize, baseYPosition, PET_WIDTH, PET_WIDTH);\n        ctx.fillStyle = \"white\";\n        ctx.font = \"24px Arial\";\n        safeFillText(ctx, currentLives, turnNumberIconSize + PET_WIDTH / 2, baseYPosition + (PET_WIDTH - 24) + 6);\n        ctx.fillStyle = \"black\";\n        ctx.font = \"18px Arial\";\n        let resultText;\n        switch(battles[i].outcome){\n            case BATTLE_OUTCOMES.LOSS:\n                resultText = \"LOSS\";\n                currentLives--;\n                break;\n            case BATTLE_OUTCOMES.WIN:\n                resultText = \"WIN\";\n                break;\n            case BATTLE_OUTCOMES.TIE:\n                resultText = \"TIE\";\n                break;\n            default:\n                resultText = \"ERROR IDK\";\n        }\n        safeFillText(ctx, resultText, turnNumberIconSize + PET_WIDTH / 2, baseYPosition + PET_WIDTH + 18 + 6);\n        for(let x = 0; x < battles[i].playerBoard.boardPets.length; x++){\n            const baseXPosition = x * (PET_WIDTH + 25) + 25 + turnNumberIconSize + livesIconSize;\n            const petJSON = battles[i].playerBoard.boardPets[x];\n            await drawPet(ctx, petJSON, baseXPosition, baseYPosition, true);\n        }\n        if (battles[i].playerBoard.toy.imagePath) {\n            await drawToy(ctx, battles[i].playerBoard.toy, 5 * (PET_WIDTH + 25) + turnNumberIconSize + livesIconSize, baseYPosition);\n        }\n        // Draw opponent lives\n        let opponentLivesOffset = 0;\n        if (battleOpponentInfo[i] || i > 0) {\n            const opponent = findOpponentInfo(i, battles[i].opponentName);\n            let opponentLives = opponent ? opponent.Lives : null;\n            if (opponentLives !== null && opponentLives !== undefined) {\n                if (battles[i].outcome === BATTLE_OUTCOMES.WIN) {\n                    opponentLives++;\n                }\n                ctx.drawImage(heartIcon, BASE_CANVAS_WIDTH - PET_WIDTH - 25, baseYPosition, PET_WIDTH, PET_WIDTH);\n                ctx.fillStyle = \"white\";\n                ctx.font = \"24px Arial\";\n                safeFillText(ctx, opponentLives, BASE_CANVAS_WIDTH - PET_WIDTH - 25 + PET_WIDTH / 2, baseYPosition + (PET_WIDTH - 24) + 6);\n                opponentLivesOffset = livesIconSize + 25;\n            }\n        }\n        for(let x = 0; x < battles[i].oppBoard.boardPets.length; x++){\n            const baseXPosition = BASE_CANVAS_WIDTH - (x * (PET_WIDTH + 25) + PET_WIDTH + 25 + opponentLivesOffset);\n            const petJSON = battles[i].oppBoard.boardPets[x];\n            await drawPet(ctx, petJSON, baseXPosition, baseYPosition, false);\n        }\n        if (battles[i].oppBoard.toy.imagePath) {\n            await drawToy(ctx, battles[i].oppBoard.toy, BASE_CANVAS_WIDTH - ((5 + 1) * (PET_WIDTH + 25) + opponentLivesOffset), baseYPosition);\n        }\n        if (includeOdds) {\n            ctx.textAlign = \"left\";\n            if (winPercent && winPercent.player && winPercent.opponent && winPercent.draw) {\n                const lossValue = parsePercentValue(winPercent.opponent);\n                const drawValue = parsePercentValue(winPercent.draw);\n                const maxValue = Math.max(winValue ?? -1, lossValue ?? -1, drawValue ?? -1);\n                const hasCertainOutcome = [\n                    winValue,\n                    lossValue,\n                    drawValue\n                ].some((value)=>value === 100);\n                const columnX = BASE_CANVAS_WIDTH + 10;\n                const textStartY = baseYPosition + 8;\n                const lineHeight = 18;\n                const expectedScore = winValue / 100 + 0.5 * (drawValue / 100);\n                if (!hasCertainOutcome || winValue === 100) {\n                    ctx.fillStyle = \"#137333\";\n                    ctx.font = winValue === maxValue ? \"bold 16px Arial\" : \"16px Arial\";\n                    safeFillText(ctx, `Win ${winPercent.player}`, columnX, textStartY);\n                }\n                if (!hasCertainOutcome || lossValue === 100) {\n                    const lossY = hasCertainOutcome ? textStartY : textStartY + lineHeight;\n                    ctx.fillStyle = \"#B00020\";\n                    ctx.font = lossValue === maxValue ? \"bold 16px Arial\" : \"16px Arial\";\n                    safeFillText(ctx, `Loss ${winPercent.opponent}`, columnX, lossY);\n                }\n                if (!hasCertainOutcome || drawValue === 100) {\n                    const drawY = hasCertainOutcome ? textStartY : textStartY + lineHeight * 2;\n                    ctx.fillStyle = \"#000000\";\n                    ctx.font = drawValue === maxValue ? \"bold 16px Arial\" : \"16px Arial\";\n                    safeFillText(ctx, `Draw ${winPercent.draw}`, columnX, drawY);\n                }\n                if (!hasCertainOutcome) {\n                    const luckPoints = calcLuckPoints(winPercent, battles[i].outcome);\n                    if (luckPoints) {\n                        totalLuckPoints += luckPoints.raw;\n                        luckSamples += 1;\n                    }\n                }\n                const expectedY = textStartY + lineHeight * 3;\n                ctx.fillStyle = \"#444444\";\n                ctx.font = \"14px Arial\";\n                safeFillText(ctx, `Expected: ${expectedScore.toFixed(3)}`, columnX, expectedY);\n                if (isGaped) {\n                    ctx.fillStyle = \"#7A5C00\";\n                    ctx.font = \"bold 16px Arial\";\n                    const gapedY = expectedY + lineHeight;\n                    safeFillText(ctx, \"GAPED\", columnX, gapedY);\n                }\n            } else {\n                ctx.fillStyle = \"#000000\";\n                ctx.font = \"16px Arial\";\n                safeFillText(ctx, \"Win% unavailable\", BASE_CANVAS_WIDTH + 10, baseYPosition + PET_WIDTH / 2 + 6);\n            }\n            ctx.textAlign = \"center\";\n        }\n    }\n    if (includeOdds) {\n        const footerTop = headerOffset + battles.length * BATTLE_HEIGHT;\n        ctx.fillStyle = \"#FFFFFF\";\n        ctx.fillRect(0, footerTop, canvasWidth, FOOTER_HEIGHT);\n        ctx.fillStyle = \"#000000\";\n        ctx.font = \"18px Arial\";\n        ctx.textAlign = \"left\";\n        const averageLuck = luckSamples > 0 ? totalLuckPoints / luckSamples : null;\n        const totalLuckText = luckSamples > 0 ? `Total Luck: ${totalLuckPoints.toFixed(2)} | Average Luck: ${averageLuck.toFixed(2)}` : \"Luck score unavailable\";\n        safeFillText(ctx, totalLuckText, 25, footerTop + 35);\n        if (missingTurns.length || hasUnknownData) {\n            const warningParts = [];\n            if (missingTurns.length) {\n                const shown = missingTurns.slice(0, 5).join(\", \");\n                const suffix = missingTurns.length > 5 ? \", ...\" : \"\";\n                warningParts.push(`Win% missing turns: ${shown}${suffix}`);\n            }\n            if (hasUnknownData) {\n                warningParts.push(\"Unknown pet/perk data detected\");\n            }\n            ctx.font = \"14px Arial\";\n            ctx.fillStyle = \"#444444\";\n            safeFillText(ctx, `Warnings: ${warningParts.join(\" | \")}`, 25, footerTop + 55);\n        }\n        ctx.textAlign = \"center\";\n    }\n    return canvas.toBuffer(\"image/png\");\n}\nmodule.exports = {\n    renderReplayImage\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcmVuZGVyLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxTQUFTQyxtQkFBT0EsQ0FBQyx1Q0FBVTtBQUNqQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFLEdBQUdGLG1CQUFPQSxDQUFDLHlDQUFXO0FBQ2hELE1BQU0sRUFBRUcsaUJBQWlCLEVBQUVDLGNBQWMsRUFBRSxHQUFHSixtQkFBT0EsQ0FBQyxtQ0FBUTtBQUM5RCxNQUFNLEVBQ0pLLGlCQUFpQixFQUNqQkMsWUFBWSxFQUNaQyxhQUFhLEVBQ2JDLFNBQVMsRUFDVEMsYUFBYSxFQUNiQyxlQUFlLEVBQ2ZDLGtCQUFrQixFQUNsQkMsZ0JBQWdCLEVBQ2hCQyxTQUFTLEVBQ1YsR0FBR2IsbUJBQU9BLENBQUMsdUNBQVU7QUFFdEIsZUFBZWMsY0FBY0MsU0FBUyxFQUFFQyxlQUFlTCxrQkFBa0I7SUFDdkUsTUFBTU0sWUFBWSxPQUFPRixjQUFjLFlBQVlBLFVBQVVHLElBQUksS0FDN0RILFlBQ0FDO0lBQ0osSUFBSTtRQUNGLE9BQU8sTUFBTWpCLE9BQU9vQixTQUFTLENBQUNGO0lBQ2hDLEVBQUUsT0FBTTtRQUNOLElBQUlBLGNBQWNELGNBQWM7WUFDOUIsT0FBT2pCLE9BQU9vQixTQUFTLENBQUNIO1FBQzFCO1FBQ0EsTUFBTSxJQUFJSSxNQUFNO0lBQ2xCO0FBQ0Y7QUFFQSxTQUFTQyxhQUFhQyxHQUFHLEVBQUVDLEtBQUssRUFBRUMsQ0FBQyxFQUFFQyxDQUFDO0lBQ3BDLE1BQU1DLE9BQU9ILFVBQVUsUUFBUUEsVUFBVUksWUFBWSxLQUFLQyxPQUFPTDtJQUNqRUQsSUFBSU8sUUFBUSxDQUFDSCxNQUFNRixHQUFHQztBQUN4QjtBQUVBLFNBQVNLLG9CQUFvQlIsR0FBRztJQUM5QixNQUFNUyxtQkFBbUJULElBQUlPLFFBQVEsQ0FBQ0csSUFBSSxDQUFDVjtJQUMzQ0EsSUFBSU8sUUFBUSxHQUFHLENBQUNOLE9BQU9DLEdBQUdDLEdBQUdRO1FBQzNCLE1BQU1QLE9BQU9ILFVBQVUsUUFBUUEsVUFBVUksWUFBWSxLQUFLQyxPQUFPTDtRQUNqRSxNQUFNVyxLQUFLQyxPQUFPQyxRQUFRLENBQUNELE9BQU9YLE1BQU1XLE9BQU9YLEtBQUs7UUFDcEQsTUFBTWEsS0FBS0YsT0FBT0MsUUFBUSxDQUFDRCxPQUFPVixNQUFNVSxPQUFPVixLQUFLO1FBQ3BELElBQUlRLGFBQWEsUUFBUUEsYUFBYU4sV0FBVztZQUMvQyxPQUFPSSxpQkFBaUJMLE1BQU1RLElBQUlHO1FBQ3BDO1FBQ0EsTUFBTUMsS0FBS0gsT0FBT0MsUUFBUSxDQUFDRCxPQUFPRixhQUFhRSxPQUFPRixZQUFZTjtRQUNsRSxJQUFJVyxPQUFPWCxXQUFXO1lBQ3BCLE9BQU9JLGlCQUFpQkwsTUFBTVEsSUFBSUc7UUFDcEM7UUFDQSxPQUFPTixpQkFBaUJMLE1BQU1RLElBQUlHLElBQUlDO0lBQ3hDO0FBQ0Y7QUFFQSxlQUFlQyxrQkFBa0IsRUFDL0JDLE9BQU8sRUFDUEMsa0JBQWtCLEVBQ2xCQyxRQUFRLEVBQ1JDLFdBQVcsRUFDWEMsaUJBQWlCLEVBQ2pCQyxVQUFVLEVBQ1ZDLGtCQUFrQixFQUNuQjtJQUNDLE1BQU1DLGVBQWVKLGNBQ2pCQyxrQkFDQ0ksR0FBRyxDQUFDLENBQUNDLFFBQVFDO1FBQ1osSUFBSSxDQUFDRCxVQUFVLENBQUNBLE9BQU9FLE1BQU0sSUFBSSxDQUFDRixPQUFPRyxRQUFRLElBQUksQ0FBQ0gsT0FBT0ksSUFBSSxFQUFFO1lBQ2pFLE9BQU9ILFFBQVE7UUFDakI7UUFDQSxPQUFPO0lBQ1QsR0FDQ0ksTUFBTSxDQUFDLENBQUMvQixRQUFVQSxVQUFVLFFBQzdCLEVBQUU7SUFDTixNQUFNZ0MsaUJBQWlCZixRQUFRZ0IsSUFBSSxDQUFDLENBQUNDO1FBQ25DLE1BQU1DLFVBQVU7ZUFDVkQsT0FBT0UsV0FBVyxFQUFFQyxhQUFhLEVBQUU7ZUFDbkNILE9BQU9JLFFBQVEsRUFBRUQsYUFBYSxFQUFFO1NBQ3JDO1FBQ0QsT0FBT0YsUUFBUUYsSUFBSSxDQUFDLENBQUNNO1lBQ25CLElBQUksQ0FBQ0EsS0FBSztnQkFDUixPQUFPO1lBQ1Q7WUFDQSxJQUFJQSxJQUFJQyxJQUFJLEtBQUssYUFBYTtnQkFDNUIsT0FBTztZQUNUO1lBQ0EsTUFBTUMsbUJBQW1CRixJQUFJL0MsU0FBUyxLQUFLSjtZQUMzQyxNQUFNc0QsaUJBQWlCSCxJQUFJSSxhQUFhLEtBQUt0RCxvQkFBb0JrRCxJQUFJSyxJQUFJLEtBQUs7WUFDOUUsT0FBT0gsb0JBQW9CQztRQUM3QjtJQUNGO0lBRUEsTUFBTUcsY0FBY3pCLGNBQWNyQyxlQUFlRDtJQUNqRCxNQUFNZ0UsZUFBZTFCLGNBQWNwQyxnQkFBZ0I7SUFDbkQsTUFBTStELGVBQWUsY0FBZXhCLHFCQUFzQixLQUFLO0lBQy9ELE1BQU15QixTQUFTeEUsT0FBT3lFLFlBQVksQ0FBQ0osYUFBYUUsZUFBZTlCLFFBQVFpQyxNQUFNLEdBQUdoRSxnQkFBZ0I0RDtJQUNoRyxNQUFNL0MsTUFBTWlELE9BQU9HLFVBQVUsQ0FBQztJQUM5QjVDLG9CQUFvQlI7SUFFcEJBLElBQUlxRCxTQUFTLEdBQUc7SUFDaEJyRCxJQUFJc0QsU0FBUyxHQUFHO0lBQ2hCdEQsSUFBSXVELFFBQVEsQ0FBQyxHQUFHLEdBQUdULGFBQWFFLGVBQWU5QixRQUFRaUMsTUFBTSxHQUFHaEUsZ0JBQWdCNEQ7SUFDaEYvQyxJQUFJd0QsSUFBSSxHQUFHO0lBRVgsTUFBTUMsZUFBZVQ7SUFDckIsSUFBSUEsY0FBYztRQUNoQmhELElBQUlzRCxTQUFTLEdBQUc7UUFDaEJ0RCxJQUFJd0QsSUFBSSxHQUFHO1FBQ1h4RCxJQUFJcUQsU0FBUyxHQUFHO1FBQ2hCdEQsYUFBYUMsS0FBSyxHQUFHdUIsV0FBVyxJQUFJLEVBQUVDLG9CQUFvQixFQUFFc0IsY0FBYyxHQUFHO0lBQy9FO0lBRUEsTUFBTVkscUJBQXFCLENBQUMsS0FBS3hFLFNBQVEsSUFBSztJQUM5QyxNQUFNeUUsZ0JBQWdCLEtBQUt6RTtJQUUzQixNQUFNMEUsZ0JBQWdCLE1BQU1wRSxjQUFjRCxVQUFVO0lBQ3BELE1BQU1zRSxZQUFZLE1BQU1yRSxjQUFjRCxVQUFVO0lBQ2hELElBQUl1RSxrQkFBa0I7SUFDdEIsSUFBSUMsY0FBYztJQUNsQixJQUFJQyxlQUFlNUM7SUFFbkIsTUFBTTZDLG1CQUFtQixDQUFDckMsT0FBT3NDO1FBQy9CLElBQUssSUFBSUMsTUFBTXZDLE9BQU91QyxPQUFPLEdBQUdBLE1BQU87WUFDckMsTUFBTUMsV0FBV2pELGtCQUFrQixDQUFDZ0QsSUFBSTtZQUN4QyxJQUFJLENBQUNDLFVBQVU7Z0JBQ2I7WUFDRjtZQUNBLE1BQU1DLFFBQVFELFNBQVNFLElBQUksQ0FBQ3hDLENBQUFBLFdBQVlBLFNBQVN5QyxXQUFXLEtBQUtMO1lBQ2pFLElBQUlHLE9BQU87Z0JBQ1QsT0FBT0E7WUFDVDtRQUNGO1FBQ0EsT0FBTztJQUNUO0lBRUEsSUFBSyxJQUFJRyxJQUFJLEdBQUdBLElBQUl0RCxRQUFRaUMsTUFBTSxFQUFFcUIsSUFBSztRQUN2Qyx1Q0FBdUM7UUFDdkMsSUFBSUEsTUFBTSxLQUFLUixlQUFlNUMsVUFBVTtZQUN0QzRDO1FBQ0Y7UUFDQSxNQUFNUyxZQUFZaEIsZUFBZWUsSUFBSXJGO1FBQ3JDLE1BQU11RixnQkFBZ0JELFlBQVk7UUFDbEMsTUFBTUUsYUFBYXJELGlCQUFpQixDQUFDa0QsRUFBRSxJQUFJO1FBQzNDLE1BQU1JLFdBQVdELGFBQWE5RixrQkFBa0I4RixXQUFXOUMsTUFBTSxJQUFJO1FBQ3JFLE1BQU1nRCxVQUFVM0QsT0FBTyxDQUFDc0QsRUFBRSxDQUFDTSxPQUFPLEtBQUsxRixnQkFBZ0IyRixHQUFHLElBQUlILGFBQWEsUUFBUUEsWUFBWTtRQUMvRjVFLElBQUlzRCxTQUFTLEdBQUc7UUFDaEIsSUFBSXVCLFNBQVM7WUFDWDdFLElBQUlzRCxTQUFTLEdBQUc7UUFDbEIsT0FBTztZQUNMLE9BQVFwQyxPQUFPLENBQUNzRCxFQUFFLENBQUNNLE9BQU87Z0JBQ3hCLEtBQUsxRixnQkFBZ0IyRixHQUFHO29CQUN0Qi9FLElBQUlzRCxTQUFTLEdBQUc7b0JBQ2hCO2dCQUNGLEtBQUtsRSxnQkFBZ0I0RixJQUFJO29CQUN2QmhGLElBQUlzRCxTQUFTLEdBQUc7b0JBQ2hCO2dCQUNGLEtBQUtsRSxnQkFBZ0I2RixHQUFHO29CQUN0QmpGLElBQUlzRCxTQUFTLEdBQUc7b0JBQ2hCO2dCQUNGO29CQUNFdEQsSUFBSXNELFNBQVMsR0FBRztZQUNwQjtRQUNGO1FBQ0F0RCxJQUFJdUQsUUFBUSxDQUFDLEdBQUdrQixXQUFXM0IsYUFBYTNEO1FBRXhDLFlBQVk7UUFDWmEsSUFBSWtGLFNBQVMsQ0FBQ3RCLGVBQWUsSUFBSWMsZUFBZXhGLFdBQVdBO1FBQzNEYyxJQUFJc0QsU0FBUyxHQUFHO1FBQ2hCdEQsSUFBSXdELElBQUksR0FBRztRQUNYekQsYUFBYUMsS0FBS3dFLElBQUksR0FBRyxLQUFLdEYsWUFBWSxJQUFJd0YsZ0JBQWdCeEYsWUFBWSxJQUFJO1FBRTlFLG9CQUFvQjtRQUNwQmMsSUFBSWtGLFNBQVMsQ0FBQ3JCLFdBQVdILG9CQUFvQmdCLGVBQWV4RixXQUFXQTtRQUN2RWMsSUFBSXNELFNBQVMsR0FBRztRQUNoQnRELElBQUl3RCxJQUFJLEdBQUc7UUFDWHpELGFBQWFDLEtBQUtnRSxjQUFjTixxQkFBcUJ4RSxZQUFZLEdBQUd3RixnQkFBaUJ4RixDQUFBQSxZQUFZLEVBQUMsSUFBSztRQUN2R2MsSUFBSXNELFNBQVMsR0FBRztRQUNoQnRELElBQUl3RCxJQUFJLEdBQUc7UUFDWCxJQUFJMkI7UUFDSixPQUFRakUsT0FBTyxDQUFDc0QsRUFBRSxDQUFDTSxPQUFPO1lBQ3hCLEtBQUsxRixnQkFBZ0I0RixJQUFJO2dCQUN2QkcsYUFBYTtnQkFDYm5CO2dCQUNBO1lBQ0YsS0FBSzVFLGdCQUFnQjJGLEdBQUc7Z0JBQ3RCSSxhQUFhO2dCQUNiO1lBQ0YsS0FBSy9GLGdCQUFnQjZGLEdBQUc7Z0JBQ3RCRSxhQUFhO2dCQUNiO1lBQ0Y7Z0JBQ0VBLGFBQWE7UUFDakI7UUFDQXBGLGFBQWFDLEtBQUttRixZQUFZekIscUJBQXFCeEUsWUFBWSxHQUFHd0YsZ0JBQWdCeEYsWUFBWSxLQUFLO1FBRW5HLElBQUssSUFBSWdCLElBQUksR0FBR0EsSUFBSWdCLE9BQU8sQ0FBQ3NELEVBQUUsQ0FBQ25DLFdBQVcsQ0FBQ0MsU0FBUyxDQUFDYSxNQUFNLEVBQUVqRCxJQUFLO1lBQ2hFLE1BQU1rRixnQkFBZ0JsRixJQUFLaEIsQ0FBQUEsWUFBWSxFQUFDLElBQUssS0FBS3dFLHFCQUFxQkM7WUFDdkUsTUFBTTBCLFVBQVVuRSxPQUFPLENBQUNzRCxFQUFFLENBQUNuQyxXQUFXLENBQUNDLFNBQVMsQ0FBQ3BDLEVBQUU7WUFDbkQsTUFBTXZCLFFBQVFxQixLQUFLcUYsU0FBU0QsZUFBZVYsZUFBZTtRQUM1RDtRQUVBLElBQUl4RCxPQUFPLENBQUNzRCxFQUFFLENBQUNuQyxXQUFXLENBQUNpRCxHQUFHLENBQUM3RixTQUFTLEVBQUU7WUFDeEMsTUFBTWIsUUFDSm9CLEtBQ0FrQixPQUFPLENBQUNzRCxFQUFFLENBQUNuQyxXQUFXLENBQUNpRCxHQUFHLEVBQzFCLElBQU9wRyxDQUFBQSxZQUFZLEVBQUMsSUFBS3dFLHFCQUFxQkMsZUFDOUNlO1FBRUo7UUFFQSxzQkFBc0I7UUFDdEIsSUFBSWEsc0JBQXNCO1FBQzFCLElBQUlwRSxrQkFBa0IsQ0FBQ3FELEVBQUUsSUFBSUEsSUFBSSxHQUFHO1lBQ2xDLE1BQU0xQyxXQUFXbUMsaUJBQWlCTyxHQUFHdEQsT0FBTyxDQUFDc0QsRUFBRSxDQUFDTixZQUFZO1lBQzVELElBQUlzQixnQkFBZ0IxRCxXQUFXQSxTQUFTMkQsS0FBSyxHQUFHO1lBQ2hELElBQUlELGtCQUFrQixRQUFRQSxrQkFBa0JuRixXQUFXO2dCQUN6RCxJQUFJYSxPQUFPLENBQUNzRCxFQUFFLENBQUNNLE9BQU8sS0FBSzFGLGdCQUFnQjJGLEdBQUcsRUFBRTtvQkFDOUNTO2dCQUNGO2dCQUNBeEYsSUFBSWtGLFNBQVMsQ0FBQ3JCLFdBQVc5RSxvQkFBb0JHLFlBQVksSUFBSXdGLGVBQWV4RixXQUFXQTtnQkFDdkZjLElBQUlzRCxTQUFTLEdBQUc7Z0JBQ2hCdEQsSUFBSXdELElBQUksR0FBRztnQkFDWHpELGFBQWFDLEtBQUt3RixlQUFlekcsb0JBQW9CRyxZQUFZLEtBQUtBLFlBQVksR0FBR3dGLGdCQUFpQnhGLENBQUFBLFlBQVksRUFBQyxJQUFLO2dCQUN4SHFHLHNCQUFzQjVCLGdCQUFnQjtZQUN4QztRQUNGO1FBRUEsSUFBSyxJQUFJekQsSUFBSSxHQUFHQSxJQUFJZ0IsT0FBTyxDQUFDc0QsRUFBRSxDQUFDakMsUUFBUSxDQUFDRCxTQUFTLENBQUNhLE1BQU0sRUFBRWpELElBQUs7WUFDN0QsTUFBTWtGLGdCQUFnQnJHLG9CQUFxQm1CLENBQUFBLElBQUtoQixDQUFBQSxZQUFZLEVBQUMsSUFBS0EsWUFBWSxLQUFLcUcsbUJBQWtCO1lBQ3JHLE1BQU1GLFVBQVVuRSxPQUFPLENBQUNzRCxFQUFFLENBQUNqQyxRQUFRLENBQUNELFNBQVMsQ0FBQ3BDLEVBQUU7WUFDaEQsTUFBTXZCLFFBQVFxQixLQUFLcUYsU0FBU0QsZUFBZVYsZUFBZTtRQUM1RDtRQUVBLElBQUl4RCxPQUFPLENBQUNzRCxFQUFFLENBQUNqQyxRQUFRLENBQUMrQyxHQUFHLENBQUM3RixTQUFTLEVBQUU7WUFDckMsTUFBTWIsUUFDSm9CLEtBQ0FrQixPQUFPLENBQUNzRCxFQUFFLENBQUNqQyxRQUFRLENBQUMrQyxHQUFHLEVBQ3ZCdkcsb0JBQXFCLEVBQUMsSUFBSSxLQUFNRyxDQUFBQSxZQUFZLEVBQUMsSUFBS3FHLG1CQUFrQixHQUNwRWI7UUFFSjtRQUVBLElBQUlyRCxhQUFhO1lBQ2ZyQixJQUFJcUQsU0FBUyxHQUFHO1lBQ2hCLElBQUlzQixjQUFjQSxXQUFXOUMsTUFBTSxJQUFJOEMsV0FBVzdDLFFBQVEsSUFBSTZDLFdBQVc1QyxJQUFJLEVBQUU7Z0JBQzdFLE1BQU0yRCxZQUFZN0csa0JBQWtCOEYsV0FBVzdDLFFBQVE7Z0JBQ3ZELE1BQU02RCxZQUFZOUcsa0JBQWtCOEYsV0FBVzVDLElBQUk7Z0JBQ25ELE1BQU02RCxXQUFXQyxLQUFLQyxHQUFHLENBQUNsQixZQUFZLENBQUMsR0FBR2MsYUFBYSxDQUFDLEdBQUdDLGFBQWEsQ0FBQztnQkFDekUsTUFBTUksb0JBQW9CO29CQUFDbkI7b0JBQVVjO29CQUFXQztpQkFBVSxDQUFDekQsSUFBSSxDQUFDLENBQUNqQyxRQUFVQSxVQUFVO2dCQUVyRixNQUFNK0YsVUFBVWpILG9CQUFvQjtnQkFDcEMsTUFBTWtILGFBQWF2QixnQkFBZ0I7Z0JBQ25DLE1BQU13QixhQUFhO2dCQUNuQixNQUFNQyxnQkFBZ0IsV0FBWSxNQUFPLE1BQU9SLENBQUFBLFlBQVksR0FBRTtnQkFFOUQsSUFBSSxDQUFDSSxxQkFBcUJuQixhQUFhLEtBQUs7b0JBQzFDNUUsSUFBSXNELFNBQVMsR0FBRztvQkFDaEJ0RCxJQUFJd0QsSUFBSSxHQUFJb0IsYUFBYWdCLFdBQVcsb0JBQW9CO29CQUN4RDdGLGFBQWFDLEtBQUssQ0FBQyxJQUFJLEVBQUUyRSxXQUFXOUMsTUFBTSxFQUFFLEVBQUVtRSxTQUFTQztnQkFDekQ7Z0JBRUEsSUFBSSxDQUFDRixxQkFBcUJMLGNBQWMsS0FBSztvQkFDM0MsTUFBTVUsUUFBUUwsb0JBQW9CRSxhQUFhQSxhQUFhQztvQkFDNURsRyxJQUFJc0QsU0FBUyxHQUFHO29CQUNoQnRELElBQUl3RCxJQUFJLEdBQUlrQyxjQUFjRSxXQUFXLG9CQUFvQjtvQkFDekQ3RixhQUFhQyxLQUFLLENBQUMsS0FBSyxFQUFFMkUsV0FBVzdDLFFBQVEsRUFBRSxFQUFFa0UsU0FBU0k7Z0JBQzVEO2dCQUVBLElBQUksQ0FBQ0wscUJBQXFCSixjQUFjLEtBQUs7b0JBQzNDLE1BQU1VLFFBQVFOLG9CQUFvQkUsYUFBYUEsYUFBYUMsYUFBYTtvQkFDekVsRyxJQUFJc0QsU0FBUyxHQUFHO29CQUNoQnRELElBQUl3RCxJQUFJLEdBQUltQyxjQUFjQyxXQUFXLG9CQUFvQjtvQkFDekQ3RixhQUFhQyxLQUFLLENBQUMsS0FBSyxFQUFFMkUsV0FBVzVDLElBQUksRUFBRSxFQUFFaUUsU0FBU0s7Z0JBQ3hEO2dCQUVBLElBQUksQ0FBQ04sbUJBQW1CO29CQUN0QixNQUFNTyxhQUFheEgsZUFBZTZGLFlBQVl6RCxPQUFPLENBQUNzRCxFQUFFLENBQUNNLE9BQU87b0JBQ2hFLElBQUl3QixZQUFZO3dCQUNkeEMsbUJBQW1Cd0MsV0FBV0MsR0FBRzt3QkFDakN4QyxlQUFlO29CQUNuQjtnQkFDQTtnQkFFQSxNQUFNeUMsWUFBWVAsYUFBYUMsYUFBYTtnQkFDNUNsRyxJQUFJc0QsU0FBUyxHQUFHO2dCQUNoQnRELElBQUl3RCxJQUFJLEdBQUc7Z0JBQ1h6RCxhQUFhQyxLQUFLLENBQUMsVUFBVSxFQUFFbUcsY0FBY00sT0FBTyxDQUFDLElBQUksRUFBRVQsU0FBU1E7Z0JBRXBFLElBQUkzQixTQUFTO29CQUNYN0UsSUFBSXNELFNBQVMsR0FBRztvQkFDaEJ0RCxJQUFJd0QsSUFBSSxHQUFHO29CQUNYLE1BQU1rRCxTQUFTRixZQUFZTjtvQkFDM0JuRyxhQUFhQyxLQUFLLFNBQVNnRyxTQUFTVTtnQkFDdEM7WUFDRixPQUFPO2dCQUNMMUcsSUFBSXNELFNBQVMsR0FBRztnQkFDaEJ0RCxJQUFJd0QsSUFBSSxHQUFHO2dCQUNYekQsYUFBYUMsS0FBSyxvQkFBb0JqQixvQkFBb0IsSUFBSTJGLGdCQUFnQnhGLFlBQVksSUFBSTtZQUNoRztZQUNBYyxJQUFJcUQsU0FBUyxHQUFHO1FBQ2xCO0lBQ0Y7SUFFQSxJQUFJaEMsYUFBYTtRQUNqQixNQUFNc0YsWUFBWWxELGVBQWV2QyxRQUFRaUMsTUFBTSxHQUFHaEU7UUFDaERhLElBQUlzRCxTQUFTLEdBQUc7UUFDaEJ0RCxJQUFJdUQsUUFBUSxDQUFDLEdBQUdvRCxXQUFXN0QsYUFBYTdEO1FBQ3hDZSxJQUFJc0QsU0FBUyxHQUFHO1FBQ2hCdEQsSUFBSXdELElBQUksR0FBRztRQUNYeEQsSUFBSXFELFNBQVMsR0FBRztRQUNoQixNQUFNdUQsY0FBYzdDLGNBQWMsSUFBS0Qsa0JBQWtCQyxjQUFlO1FBQ3hFLE1BQU04QyxnQkFBZ0I5QyxjQUFjLElBQ2hDLENBQUMsWUFBWSxFQUFFRCxnQkFBZ0IyQyxPQUFPLENBQUMsR0FBRyxpQkFBaUIsRUFBRUcsWUFBWUgsT0FBTyxDQUFDLElBQUksR0FDckY7UUFDSjFHLGFBQWFDLEtBQUs2RyxlQUFlLElBQUlGLFlBQVk7UUFDakQsSUFBSWxGLGFBQWEwQixNQUFNLElBQUlsQixnQkFBZ0I7WUFDekMsTUFBTTZFLGVBQWUsRUFBRTtZQUN2QixJQUFJckYsYUFBYTBCLE1BQU0sRUFBRTtnQkFDdkIsTUFBTTRELFFBQVF0RixhQUFhdUYsS0FBSyxDQUFDLEdBQUcsR0FBR0MsSUFBSSxDQUFDO2dCQUM1QyxNQUFNQyxTQUFTekYsYUFBYTBCLE1BQU0sR0FBRyxJQUFJLFVBQVU7Z0JBQ25EMkQsYUFBYUssSUFBSSxDQUFDLENBQUMsb0JBQW9CLEVBQUVKLFFBQVFHLFFBQVE7WUFDM0Q7WUFDQSxJQUFJakYsZ0JBQWdCO2dCQUNsQjZFLGFBQWFLLElBQUksQ0FBQztZQUNwQjtZQUNBbkgsSUFBSXdELElBQUksR0FBRztZQUNYeEQsSUFBSXNELFNBQVMsR0FBRztZQUNoQnZELGFBQWFDLEtBQUssQ0FBQyxVQUFVLEVBQUU4RyxhQUFhRyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUlOLFlBQVk7UUFDN0U7UUFDQTNHLElBQUlxRCxTQUFTLEdBQUc7SUFDbEI7SUFFQSxPQUFPSixPQUFPbUUsUUFBUSxDQUFDO0FBQ3pCO0FBRUFDLE9BQU9DLE9BQU8sR0FBRztJQUNmckc7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwb3J0ZVxcRG93bmxvYWRzXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxzYXAtcmVwbGF5LWJvdC1tYWluXFxsaWJcXHJlbmRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDYW52YXMgPSByZXF1aXJlKFwiLi9jYW52YXNcIik7XG5jb25zdCB7IGRyYXdQZXQsIGRyYXdUb3kgfSA9IHJlcXVpcmUoJy4vZHJhd2luZycpO1xuY29uc3QgeyBwYXJzZVBlcmNlbnRWYWx1ZSwgY2FsY0x1Y2tQb2ludHMgfSA9IHJlcXVpcmUoJy4vbHVjaycpO1xuY29uc3Qge1xuICBCQVNFX0NBTlZBU19XSURUSCxcbiAgQ0FOVkFTX1dJRFRILFxuICBGT09URVJfSEVJR0hULFxuICBQRVRfV0lEVEgsXG4gIEJBVFRMRV9IRUlHSFQsXG4gIEJBVFRMRV9PVVRDT01FUyxcbiAgUExBQ0VIT0xERVJfU1BSSVRFLFxuICBQTEFDRUhPTERFUl9QRVJLLFxuICBhc3NldFBhdGhcbn0gPSByZXF1aXJlKCcuL2NvbmZpZycpO1xuXG5hc3luYyBmdW5jdGlvbiBsb2FkSW1hZ2VTYWZlKGltYWdlUGF0aCwgZmFsbGJhY2tQYXRoID0gUExBQ0VIT0xERVJfU1BSSVRFKSB7XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHR5cGVvZiBpbWFnZVBhdGggPT09IFwic3RyaW5nXCIgJiYgaW1hZ2VQYXRoLnRyaW0oKVxuICAgID8gaW1hZ2VQYXRoXG4gICAgOiBmYWxsYmFja1BhdGg7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IENhbnZhcy5sb2FkSW1hZ2UoY2FuZGlkYXRlKTtcbiAgfSBjYXRjaCB7XG4gICAgaWYgKGNhbmRpZGF0ZSAhPT0gZmFsbGJhY2tQYXRoKSB7XG4gICAgICByZXR1cm4gQ2FudmFzLmxvYWRJbWFnZShmYWxsYmFja1BhdGgpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmYWlsZWQgdG8gbG9hZCBpbWFnZSBhbmQgZmFsbGJhY2tcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2FmZUZpbGxUZXh0KGN0eCwgdmFsdWUsIHgsIHkpIHtcbiAgY29uc3QgdGV4dCA9IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgPyBcIlwiIDogU3RyaW5nKHZhbHVlKTtcbiAgY3R4LmZpbGxUZXh0KHRleHQsIHgsIHkpO1xufVxuXG5mdW5jdGlvbiBoYXJkZW5UZXh0UmVuZGVyaW5nKGN0eCkge1xuICBjb25zdCBvcmlnaW5hbEZpbGxUZXh0ID0gY3R4LmZpbGxUZXh0LmJpbmQoY3R4KTtcbiAgY3R4LmZpbGxUZXh0ID0gKHZhbHVlLCB4LCB5LCBtYXhXaWR0aCkgPT4ge1xuICAgIGNvbnN0IHRleHQgPSB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IFN0cmluZyh2YWx1ZSk7XG4gICAgY29uc3QgcHggPSBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKHgpKSA/IE51bWJlcih4KSA6IDA7XG4gICAgY29uc3QgcHkgPSBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKHkpKSA/IE51bWJlcih5KSA6IDA7XG4gICAgaWYgKG1heFdpZHRoID09PSBudWxsIHx8IG1heFdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBvcmlnaW5hbEZpbGxUZXh0KHRleHQsIHB4LCBweSk7XG4gICAgfVxuICAgIGNvbnN0IG13ID0gTnVtYmVyLmlzRmluaXRlKE51bWJlcihtYXhXaWR0aCkpID8gTnVtYmVyKG1heFdpZHRoKSA6IHVuZGVmaW5lZDtcbiAgICBpZiAobXcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG9yaWdpbmFsRmlsbFRleHQodGV4dCwgcHgsIHB5KTtcbiAgICB9XG4gICAgcmV0dXJuIG9yaWdpbmFsRmlsbFRleHQodGV4dCwgcHgsIHB5LCBtdyk7XG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlbmRlclJlcGxheUltYWdlKHtcbiAgYmF0dGxlcyxcbiAgYmF0dGxlT3Bwb25lbnRJbmZvLFxuICBtYXhMaXZlcyxcbiAgaW5jbHVkZU9kZHMsXG4gIHdpblBlcmNlbnRSZXN1bHRzLFxuICBwbGF5ZXJOYW1lLFxuICBoZWFkZXJPcHBvbmVudE5hbWVcbn0pIHtcbiAgY29uc3QgbWlzc2luZ1R1cm5zID0gaW5jbHVkZU9kZHNcbiAgICA/IHdpblBlcmNlbnRSZXN1bHRzXG4gICAgICAubWFwKChyZXN1bHQsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmICghcmVzdWx0IHx8ICFyZXN1bHQucGxheWVyIHx8ICFyZXN1bHQub3Bwb25lbnQgfHwgIXJlc3VsdC5kcmF3KSB7XG4gICAgICAgICAgcmV0dXJuIGluZGV4ICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKCh2YWx1ZSkgPT4gdmFsdWUgIT09IG51bGwpXG4gICAgOiBbXTtcbiAgY29uc3QgaGFzVW5rbm93bkRhdGEgPSBiYXR0bGVzLnNvbWUoKGJhdHRsZSkgPT4ge1xuICAgIGNvbnN0IGFsbFBldHMgPSBbXG4gICAgICAuLi4oYmF0dGxlLnBsYXllckJvYXJkPy5ib2FyZFBldHMgfHwgW10pLFxuICAgICAgLi4uKGJhdHRsZS5vcHBCb2FyZD8uYm9hcmRQZXRzIHx8IFtdKVxuICAgIF07XG4gICAgcmV0dXJuIGFsbFBldHMuc29tZSgocGV0KSA9PiB7XG4gICAgICBpZiAoIXBldCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAocGV0Lm5hbWUgPT09IFwiVG9rZW4gUGV0XCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgaGFzVW5rbm93blNwcml0ZSA9IHBldC5pbWFnZVBhdGggPT09IFBMQUNFSE9MREVSX1NQUklURTtcbiAgICAgIGNvbnN0IGhhc1Vua25vd25QZXJrID0gcGV0LnBlcmtJbWFnZVBhdGggPT09IFBMQUNFSE9MREVSX1BFUksgfHwgcGV0LnBlcmsgPT09IFwiVU5LTk9XTiBQRVJLXCI7XG4gICAgICByZXR1cm4gaGFzVW5rbm93blNwcml0ZSB8fCBoYXNVbmtub3duUGVyaztcbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgY2FudmFzV2lkdGggPSBpbmNsdWRlT2RkcyA/IENBTlZBU19XSURUSCA6IEJBU0VfQ0FOVkFTX1dJRFRIO1xuICBjb25zdCBmb290ZXJIZWlnaHQgPSBpbmNsdWRlT2RkcyA/IEZPT1RFUl9IRUlHSFQgOiAwO1xuICBjb25zdCBoZWFkZXJIZWlnaHQgPSAocGxheWVyTmFtZSAmJiBoZWFkZXJPcHBvbmVudE5hbWUpID8gMzYgOiAwO1xuICBjb25zdCBjYW52YXMgPSBDYW52YXMuY3JlYXRlQ2FudmFzKGNhbnZhc1dpZHRoLCBoZWFkZXJIZWlnaHQgKyBiYXR0bGVzLmxlbmd0aCAqIEJBVFRMRV9IRUlHSFQgKyBmb290ZXJIZWlnaHQpO1xuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICBoYXJkZW5UZXh0UmVuZGVyaW5nKGN0eCk7XG5cbiAgY3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gIGN0eC5maWxsU3R5bGUgPSBcIiNGRkZGRkZcIjtcbiAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhc1dpZHRoLCBoZWFkZXJIZWlnaHQgKyBiYXR0bGVzLmxlbmd0aCAqIEJBVFRMRV9IRUlHSFQgKyBmb290ZXJIZWlnaHQpO1xuICBjdHguZm9udCA9IFwiMThweCBBcmlhbFwiO1xuXG4gIGNvbnN0IGhlYWRlck9mZnNldCA9IGhlYWRlckhlaWdodDtcbiAgaWYgKGhlYWRlckhlaWdodCkge1xuICAgIGN0eC5maWxsU3R5bGUgPSBcIiMwMDAwMDBcIjtcbiAgICBjdHguZm9udCA9IFwiMThweCBBcmlhbFwiO1xuICAgIGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgIHNhZmVGaWxsVGV4dChjdHgsIGAke3BsYXllck5hbWV9IHZzICR7aGVhZGVyT3Bwb25lbnROYW1lfWAsIGNhbnZhc1dpZHRoIC8gMiwgMjQpO1xuICB9XG5cbiAgY29uc3QgdHVybk51bWJlckljb25TaXplID0gKDI1ICsgUEVUX1dJRFRIKSAqIDI7XG4gIGNvbnN0IGxpdmVzSWNvblNpemUgPSAxNSArIFBFVF9XSURUSDtcblxuICBjb25zdCBob3VyZ2xhc3NJY29uID0gYXdhaXQgbG9hZEltYWdlU2FmZShhc3NldFBhdGgoXCJob3VyZ2xhc3MtdHdlbW9qaS5wbmdcIikpO1xuICBjb25zdCBoZWFydEljb24gPSBhd2FpdCBsb2FkSW1hZ2VTYWZlKGFzc2V0UGF0aChcImhlYXJ0LXR3ZW1vamkucG5nXCIpKTtcbiAgbGV0IHRvdGFsTHVja1BvaW50cyA9IDA7XG4gIGxldCBsdWNrU2FtcGxlcyA9IDA7XG4gIGxldCBjdXJyZW50TGl2ZXMgPSBtYXhMaXZlcztcblxuICBjb25zdCBmaW5kT3Bwb25lbnRJbmZvID0gKGluZGV4LCBvcHBvbmVudE5hbWUpID0+IHtcbiAgICBmb3IgKGxldCBpZHggPSBpbmRleDsgaWR4ID49IDA7IGlkeC0tKSB7XG4gICAgICBjb25zdCBpbmZvTGlzdCA9IGJhdHRsZU9wcG9uZW50SW5mb1tpZHhdO1xuICAgICAgaWYgKCFpbmZvTGlzdCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1hdGNoID0gaW5mb0xpc3QuZmluZChvcHBvbmVudCA9PiBvcHBvbmVudC5EaXNwbGF5TmFtZSA9PT0gb3Bwb25lbnROYW1lKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYmF0dGxlcy5sZW5ndGg7IGkrKykge1xuICAgIC8vIFR1cm4gMyAoc2hvd3MgdXAgdHVybiA0KSBsaWZlIHJlZ2FpblxuICAgIGlmIChpID09PSAyICYmIGN1cnJlbnRMaXZlcyA8IG1heExpdmVzKSB7XG4gICAgICBjdXJyZW50TGl2ZXMrKztcbiAgICB9XG4gICAgY29uc3Qgcm93U3RhcnRZID0gaGVhZGVyT2Zmc2V0ICsgaSAqIEJBVFRMRV9IRUlHSFQ7XG4gICAgY29uc3QgYmFzZVlQb3NpdGlvbiA9IHJvd1N0YXJ0WSArIDI1O1xuICAgIGNvbnN0IHdpblBlcmNlbnQgPSB3aW5QZXJjZW50UmVzdWx0c1tpXSB8fCBudWxsO1xuICAgIGNvbnN0IHdpblZhbHVlID0gd2luUGVyY2VudCA/IHBhcnNlUGVyY2VudFZhbHVlKHdpblBlcmNlbnQucGxheWVyKSA6IG51bGw7XG4gICAgY29uc3QgaXNHYXBlZCA9IGJhdHRsZXNbaV0ub3V0Y29tZSA9PT0gQkFUVExFX09VVENPTUVTLldJTiAmJiB3aW5WYWx1ZSAhPT0gbnVsbCAmJiB3aW5WYWx1ZSA8PSA1O1xuICAgIGN0eC5maWxsU3R5bGUgPSBcIiNGRkZGRkZcIjtcbiAgICBpZiAoaXNHYXBlZCkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiI0Y0RDM1RVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKGJhdHRsZXNbaV0ub3V0Y29tZSkge1xuICAgICAgICBjYXNlIEJBVFRMRV9PVVRDT01FUy5XSU46XG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiI0U2RjRFQVwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEJBVFRMRV9PVVRDT01FUy5MT1NTOlxuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNGREVDRUFcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCQVRUTEVfT1VUQ09NRVMuVElFOlxuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNGMkYyRjJcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjRkZGRkZGXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGN0eC5maWxsUmVjdCgwLCByb3dTdGFydFksIGNhbnZhc1dpZHRoLCBCQVRUTEVfSEVJR0hUKTtcblxuICAgIC8vIERyYXcgVHVyblxuICAgIGN0eC5kcmF3SW1hZ2UoaG91cmdsYXNzSWNvbiwgMjUsIGJhc2VZUG9zaXRpb24sIFBFVF9XSURUSCwgUEVUX1dJRFRIKTtcbiAgICBjdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xuICAgIGN0eC5mb250ID0gXCIyNHB4IEFyaWFsXCI7XG4gICAgc2FmZUZpbGxUZXh0KGN0eCwgaSArIDEsIDI1ICsgUEVUX1dJRFRIICsgMTUsIGJhc2VZUG9zaXRpb24gKyBQRVRfV0lEVEggLyAyICsgNik7XG5cbiAgICAvLyBEcmF3IFBsYXllciBMaXZlc1xuICAgIGN0eC5kcmF3SW1hZ2UoaGVhcnRJY29uLCB0dXJuTnVtYmVySWNvblNpemUsIGJhc2VZUG9zaXRpb24sIFBFVF9XSURUSCwgUEVUX1dJRFRIKTtcbiAgICBjdHguZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xuICAgIGN0eC5mb250ID0gXCIyNHB4IEFyaWFsXCI7XG4gICAgc2FmZUZpbGxUZXh0KGN0eCwgY3VycmVudExpdmVzLCB0dXJuTnVtYmVySWNvblNpemUgKyBQRVRfV0lEVEggLyAyLCBiYXNlWVBvc2l0aW9uICsgKFBFVF9XSURUSCAtIDI0KSArIDYpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gICAgY3R4LmZvbnQgPSBcIjE4cHggQXJpYWxcIjtcbiAgICBsZXQgcmVzdWx0VGV4dDtcbiAgICBzd2l0Y2ggKGJhdHRsZXNbaV0ub3V0Y29tZSkge1xuICAgICAgY2FzZSBCQVRUTEVfT1VUQ09NRVMuTE9TUzpcbiAgICAgICAgcmVzdWx0VGV4dCA9IFwiTE9TU1wiO1xuICAgICAgICBjdXJyZW50TGl2ZXMtLTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJBVFRMRV9PVVRDT01FUy5XSU46XG4gICAgICAgIHJlc3VsdFRleHQgPSBcIldJTlwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQkFUVExFX09VVENPTUVTLlRJRTpcbiAgICAgICAgcmVzdWx0VGV4dCA9IFwiVElFXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmVzdWx0VGV4dCA9IFwiRVJST1IgSURLXCI7XG4gICAgfVxuICAgIHNhZmVGaWxsVGV4dChjdHgsIHJlc3VsdFRleHQsIHR1cm5OdW1iZXJJY29uU2l6ZSArIFBFVF9XSURUSCAvIDIsIGJhc2VZUG9zaXRpb24gKyBQRVRfV0lEVEggKyAxOCArIDYpO1xuXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBiYXR0bGVzW2ldLnBsYXllckJvYXJkLmJvYXJkUGV0cy5sZW5ndGg7IHgrKykge1xuICAgICAgY29uc3QgYmFzZVhQb3NpdGlvbiA9IHggKiAoUEVUX1dJRFRIICsgMjUpICsgMjUgKyB0dXJuTnVtYmVySWNvblNpemUgKyBsaXZlc0ljb25TaXplO1xuICAgICAgY29uc3QgcGV0SlNPTiA9IGJhdHRsZXNbaV0ucGxheWVyQm9hcmQuYm9hcmRQZXRzW3hdO1xuICAgICAgYXdhaXQgZHJhd1BldChjdHgsIHBldEpTT04sIGJhc2VYUG9zaXRpb24sIGJhc2VZUG9zaXRpb24sIHRydWUpO1xuICAgIH1cblxuICAgIGlmIChiYXR0bGVzW2ldLnBsYXllckJvYXJkLnRveS5pbWFnZVBhdGgpIHtcbiAgICAgIGF3YWl0IGRyYXdUb3koXG4gICAgICAgIGN0eCxcbiAgICAgICAgYmF0dGxlc1tpXS5wbGF5ZXJCb2FyZC50b3ksXG4gICAgICAgICg1KSAqIChQRVRfV0lEVEggKyAyNSkgKyB0dXJuTnVtYmVySWNvblNpemUgKyBsaXZlc0ljb25TaXplLFxuICAgICAgICBiYXNlWVBvc2l0aW9uXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIERyYXcgb3Bwb25lbnQgbGl2ZXNcbiAgICBsZXQgb3Bwb25lbnRMaXZlc09mZnNldCA9IDA7XG4gICAgaWYgKGJhdHRsZU9wcG9uZW50SW5mb1tpXSB8fCBpID4gMCkge1xuICAgICAgY29uc3Qgb3Bwb25lbnQgPSBmaW5kT3Bwb25lbnRJbmZvKGksIGJhdHRsZXNbaV0ub3Bwb25lbnROYW1lKTtcbiAgICAgIGxldCBvcHBvbmVudExpdmVzID0gb3Bwb25lbnQgPyBvcHBvbmVudC5MaXZlcyA6IG51bGw7XG4gICAgICBpZiAob3Bwb25lbnRMaXZlcyAhPT0gbnVsbCAmJiBvcHBvbmVudExpdmVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGJhdHRsZXNbaV0ub3V0Y29tZSA9PT0gQkFUVExFX09VVENPTUVTLldJTikge1xuICAgICAgICAgIG9wcG9uZW50TGl2ZXMrKztcbiAgICAgICAgfVxuICAgICAgICBjdHguZHJhd0ltYWdlKGhlYXJ0SWNvbiwgQkFTRV9DQU5WQVNfV0lEVEggLSBQRVRfV0lEVEggLSAyNSwgYmFzZVlQb3NpdGlvbiwgUEVUX1dJRFRILCBQRVRfV0lEVEgpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xuICAgICAgICBjdHguZm9udCA9IFwiMjRweCBBcmlhbFwiO1xuICAgICAgICBzYWZlRmlsbFRleHQoY3R4LCBvcHBvbmVudExpdmVzLCBCQVNFX0NBTlZBU19XSURUSCAtIFBFVF9XSURUSCAtIDI1ICsgUEVUX1dJRFRIIC8gMiwgYmFzZVlQb3NpdGlvbiArIChQRVRfV0lEVEggLSAyNCkgKyA2KTtcbiAgICAgICAgb3Bwb25lbnRMaXZlc09mZnNldCA9IGxpdmVzSWNvblNpemUgKyAyNTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGJhdHRsZXNbaV0ub3BwQm9hcmQuYm9hcmRQZXRzLmxlbmd0aDsgeCsrKSB7XG4gICAgICBjb25zdCBiYXNlWFBvc2l0aW9uID0gQkFTRV9DQU5WQVNfV0lEVEggLSAoeCAqIChQRVRfV0lEVEggKyAyNSkgKyBQRVRfV0lEVEggKyAyNSArIG9wcG9uZW50TGl2ZXNPZmZzZXQpO1xuICAgICAgY29uc3QgcGV0SlNPTiA9IGJhdHRsZXNbaV0ub3BwQm9hcmQuYm9hcmRQZXRzW3hdO1xuICAgICAgYXdhaXQgZHJhd1BldChjdHgsIHBldEpTT04sIGJhc2VYUG9zaXRpb24sIGJhc2VZUG9zaXRpb24sIGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoYmF0dGxlc1tpXS5vcHBCb2FyZC50b3kuaW1hZ2VQYXRoKSB7XG4gICAgICBhd2FpdCBkcmF3VG95KFxuICAgICAgICBjdHgsXG4gICAgICAgIGJhdHRsZXNbaV0ub3BwQm9hcmQudG95LFxuICAgICAgICBCQVNFX0NBTlZBU19XSURUSCAtICgoNSArIDEpICogKFBFVF9XSURUSCArIDI1KSArIG9wcG9uZW50TGl2ZXNPZmZzZXQpLFxuICAgICAgICBiYXNlWVBvc2l0aW9uXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChpbmNsdWRlT2Rkcykge1xuICAgICAgY3R4LnRleHRBbGlnbiA9IFwibGVmdFwiO1xuICAgICAgaWYgKHdpblBlcmNlbnQgJiYgd2luUGVyY2VudC5wbGF5ZXIgJiYgd2luUGVyY2VudC5vcHBvbmVudCAmJiB3aW5QZXJjZW50LmRyYXcpIHtcbiAgICAgICAgY29uc3QgbG9zc1ZhbHVlID0gcGFyc2VQZXJjZW50VmFsdWUod2luUGVyY2VudC5vcHBvbmVudCk7XG4gICAgICAgIGNvbnN0IGRyYXdWYWx1ZSA9IHBhcnNlUGVyY2VudFZhbHVlKHdpblBlcmNlbnQuZHJhdyk7XG4gICAgICAgIGNvbnN0IG1heFZhbHVlID0gTWF0aC5tYXgod2luVmFsdWUgPz8gLTEsIGxvc3NWYWx1ZSA/PyAtMSwgZHJhd1ZhbHVlID8/IC0xKTtcbiAgICAgICAgY29uc3QgaGFzQ2VydGFpbk91dGNvbWUgPSBbd2luVmFsdWUsIGxvc3NWYWx1ZSwgZHJhd1ZhbHVlXS5zb21lKCh2YWx1ZSkgPT4gdmFsdWUgPT09IDEwMCk7XG5cbiAgICAgICAgY29uc3QgY29sdW1uWCA9IEJBU0VfQ0FOVkFTX1dJRFRIICsgMTA7XG4gICAgICAgIGNvbnN0IHRleHRTdGFydFkgPSBiYXNlWVBvc2l0aW9uICsgODtcbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IDE4O1xuICAgICAgICBjb25zdCBleHBlY3RlZFNjb3JlID0gKHdpblZhbHVlIC8gMTAwKSArIDAuNSAqIChkcmF3VmFsdWUgLyAxMDApO1xuXG4gICAgICAgIGlmICghaGFzQ2VydGFpbk91dGNvbWUgfHwgd2luVmFsdWUgPT09IDEwMCkge1xuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiMxMzczMzNcIjtcbiAgICAgICAgICBjdHguZm9udCA9ICh3aW5WYWx1ZSA9PT0gbWF4VmFsdWUgPyBcImJvbGQgMTZweCBBcmlhbFwiIDogXCIxNnB4IEFyaWFsXCIpO1xuICAgICAgICAgIHNhZmVGaWxsVGV4dChjdHgsIGBXaW4gJHt3aW5QZXJjZW50LnBsYXllcn1gLCBjb2x1bW5YLCB0ZXh0U3RhcnRZKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaGFzQ2VydGFpbk91dGNvbWUgfHwgbG9zc1ZhbHVlID09PSAxMDApIHtcbiAgICAgICAgICBjb25zdCBsb3NzWSA9IGhhc0NlcnRhaW5PdXRjb21lID8gdGV4dFN0YXJ0WSA6IHRleHRTdGFydFkgKyBsaW5lSGVpZ2h0O1xuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNCMDAwMjBcIjtcbiAgICAgICAgICBjdHguZm9udCA9IChsb3NzVmFsdWUgPT09IG1heFZhbHVlID8gXCJib2xkIDE2cHggQXJpYWxcIiA6IFwiMTZweCBBcmlhbFwiKTtcbiAgICAgICAgICBzYWZlRmlsbFRleHQoY3R4LCBgTG9zcyAke3dpblBlcmNlbnQub3Bwb25lbnR9YCwgY29sdW1uWCwgbG9zc1kpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFoYXNDZXJ0YWluT3V0Y29tZSB8fCBkcmF3VmFsdWUgPT09IDEwMCkge1xuICAgICAgICAgIGNvbnN0IGRyYXdZID0gaGFzQ2VydGFpbk91dGNvbWUgPyB0ZXh0U3RhcnRZIDogdGV4dFN0YXJ0WSArIGxpbmVIZWlnaHQgKiAyO1xuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiMwMDAwMDBcIjtcbiAgICAgICAgICBjdHguZm9udCA9IChkcmF3VmFsdWUgPT09IG1heFZhbHVlID8gXCJib2xkIDE2cHggQXJpYWxcIiA6IFwiMTZweCBBcmlhbFwiKTtcbiAgICAgICAgICBzYWZlRmlsbFRleHQoY3R4LCBgRHJhdyAke3dpblBlcmNlbnQuZHJhd31gLCBjb2x1bW5YLCBkcmF3WSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhhc0NlcnRhaW5PdXRjb21lKSB7XG4gICAgICAgICAgY29uc3QgbHVja1BvaW50cyA9IGNhbGNMdWNrUG9pbnRzKHdpblBlcmNlbnQsIGJhdHRsZXNbaV0ub3V0Y29tZSk7XG4gICAgICAgICAgaWYgKGx1Y2tQb2ludHMpIHtcbiAgICAgICAgICAgIHRvdGFsTHVja1BvaW50cyArPSBsdWNrUG9pbnRzLnJhdztcbiAgICAgICAgICAgIGx1Y2tTYW1wbGVzICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkWSA9IHRleHRTdGFydFkgKyBsaW5lSGVpZ2h0ICogMztcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiIzQ0NDQ0NFwiO1xuICAgICAgICBjdHguZm9udCA9IFwiMTRweCBBcmlhbFwiO1xuICAgICAgICBzYWZlRmlsbFRleHQoY3R4LCBgRXhwZWN0ZWQ6ICR7ZXhwZWN0ZWRTY29yZS50b0ZpeGVkKDMpfWAsIGNvbHVtblgsIGV4cGVjdGVkWSk7XG5cbiAgICAgICAgaWYgKGlzR2FwZWQpIHtcbiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjN0E1QzAwXCI7XG4gICAgICAgICAgY3R4LmZvbnQgPSBcImJvbGQgMTZweCBBcmlhbFwiO1xuICAgICAgICAgIGNvbnN0IGdhcGVkWSA9IGV4cGVjdGVkWSArIGxpbmVIZWlnaHQ7XG4gICAgICAgICAgc2FmZUZpbGxUZXh0KGN0eCwgXCJHQVBFRFwiLCBjb2x1bW5YLCBnYXBlZFkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjMDAwMDAwXCI7XG4gICAgICAgIGN0eC5mb250ID0gXCIxNnB4IEFyaWFsXCI7XG4gICAgICAgIHNhZmVGaWxsVGV4dChjdHgsIFwiV2luJSB1bmF2YWlsYWJsZVwiLCBCQVNFX0NBTlZBU19XSURUSCArIDEwLCBiYXNlWVBvc2l0aW9uICsgUEVUX1dJRFRIIC8gMiArIDYpO1xuICAgICAgfVxuICAgICAgY3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgfVxuICB9XG5cbiAgaWYgKGluY2x1ZGVPZGRzKSB7XG4gIGNvbnN0IGZvb3RlclRvcCA9IGhlYWRlck9mZnNldCArIGJhdHRsZXMubGVuZ3RoICogQkFUVExFX0hFSUdIVDtcbiAgICBjdHguZmlsbFN0eWxlID0gXCIjRkZGRkZGXCI7XG4gICAgY3R4LmZpbGxSZWN0KDAsIGZvb3RlclRvcCwgY2FudmFzV2lkdGgsIEZPT1RFUl9IRUlHSFQpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBcIiMwMDAwMDBcIjtcbiAgICBjdHguZm9udCA9IFwiMThweCBBcmlhbFwiO1xuICAgIGN0eC50ZXh0QWxpZ24gPSBcImxlZnRcIjtcbiAgICBjb25zdCBhdmVyYWdlTHVjayA9IGx1Y2tTYW1wbGVzID4gMCA/ICh0b3RhbEx1Y2tQb2ludHMgLyBsdWNrU2FtcGxlcykgOiBudWxsO1xuICAgIGNvbnN0IHRvdGFsTHVja1RleHQgPSBsdWNrU2FtcGxlcyA+IDBcbiAgICAgID8gYFRvdGFsIEx1Y2s6ICR7dG90YWxMdWNrUG9pbnRzLnRvRml4ZWQoMil9IHwgQXZlcmFnZSBMdWNrOiAke2F2ZXJhZ2VMdWNrLnRvRml4ZWQoMil9YFxuICAgICAgOiBcIkx1Y2sgc2NvcmUgdW5hdmFpbGFibGVcIjtcbiAgICBzYWZlRmlsbFRleHQoY3R4LCB0b3RhbEx1Y2tUZXh0LCAyNSwgZm9vdGVyVG9wICsgMzUpO1xuICAgIGlmIChtaXNzaW5nVHVybnMubGVuZ3RoIHx8IGhhc1Vua25vd25EYXRhKSB7XG4gICAgICBjb25zdCB3YXJuaW5nUGFydHMgPSBbXTtcbiAgICAgIGlmIChtaXNzaW5nVHVybnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHNob3duID0gbWlzc2luZ1R1cm5zLnNsaWNlKDAsIDUpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgY29uc3Qgc3VmZml4ID0gbWlzc2luZ1R1cm5zLmxlbmd0aCA+IDUgPyBcIiwgLi4uXCIgOiBcIlwiO1xuICAgICAgICB3YXJuaW5nUGFydHMucHVzaChgV2luJSBtaXNzaW5nIHR1cm5zOiAke3Nob3dufSR7c3VmZml4fWApO1xuICAgICAgfVxuICAgICAgaWYgKGhhc1Vua25vd25EYXRhKSB7XG4gICAgICAgIHdhcm5pbmdQYXJ0cy5wdXNoKFwiVW5rbm93biBwZXQvcGVyayBkYXRhIGRldGVjdGVkXCIpO1xuICAgICAgfVxuICAgICAgY3R4LmZvbnQgPSBcIjE0cHggQXJpYWxcIjtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiM0NDQ0NDRcIjtcbiAgICAgIHNhZmVGaWxsVGV4dChjdHgsIGBXYXJuaW5nczogJHt3YXJuaW5nUGFydHMuam9pbihcIiB8IFwiKX1gLCAyNSwgZm9vdGVyVG9wICsgNTUpO1xuICAgIH1cbiAgICBjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgfVxuXG4gIHJldHVybiBjYW52YXMudG9CdWZmZXIoXCJpbWFnZS9wbmdcIik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZW5kZXJSZXBsYXlJbWFnZVxufTtcbiJdLCJuYW1lcyI6WyJDYW52YXMiLCJyZXF1aXJlIiwiZHJhd1BldCIsImRyYXdUb3kiLCJwYXJzZVBlcmNlbnRWYWx1ZSIsImNhbGNMdWNrUG9pbnRzIiwiQkFTRV9DQU5WQVNfV0lEVEgiLCJDQU5WQVNfV0lEVEgiLCJGT09URVJfSEVJR0hUIiwiUEVUX1dJRFRIIiwiQkFUVExFX0hFSUdIVCIsIkJBVFRMRV9PVVRDT01FUyIsIlBMQUNFSE9MREVSX1NQUklURSIsIlBMQUNFSE9MREVSX1BFUksiLCJhc3NldFBhdGgiLCJsb2FkSW1hZ2VTYWZlIiwiaW1hZ2VQYXRoIiwiZmFsbGJhY2tQYXRoIiwiY2FuZGlkYXRlIiwidHJpbSIsImxvYWRJbWFnZSIsIkVycm9yIiwic2FmZUZpbGxUZXh0IiwiY3R4IiwidmFsdWUiLCJ4IiwieSIsInRleHQiLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJmaWxsVGV4dCIsImhhcmRlblRleHRSZW5kZXJpbmciLCJvcmlnaW5hbEZpbGxUZXh0IiwiYmluZCIsIm1heFdpZHRoIiwicHgiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsInB5IiwibXciLCJyZW5kZXJSZXBsYXlJbWFnZSIsImJhdHRsZXMiLCJiYXR0bGVPcHBvbmVudEluZm8iLCJtYXhMaXZlcyIsImluY2x1ZGVPZGRzIiwid2luUGVyY2VudFJlc3VsdHMiLCJwbGF5ZXJOYW1lIiwiaGVhZGVyT3Bwb25lbnROYW1lIiwibWlzc2luZ1R1cm5zIiwibWFwIiwicmVzdWx0IiwiaW5kZXgiLCJwbGF5ZXIiLCJvcHBvbmVudCIsImRyYXciLCJmaWx0ZXIiLCJoYXNVbmtub3duRGF0YSIsInNvbWUiLCJiYXR0bGUiLCJhbGxQZXRzIiwicGxheWVyQm9hcmQiLCJib2FyZFBldHMiLCJvcHBCb2FyZCIsInBldCIsIm5hbWUiLCJoYXNVbmtub3duU3ByaXRlIiwiaGFzVW5rbm93blBlcmsiLCJwZXJrSW1hZ2VQYXRoIiwicGVyayIsImNhbnZhc1dpZHRoIiwiZm9vdGVySGVpZ2h0IiwiaGVhZGVySGVpZ2h0IiwiY2FudmFzIiwiY3JlYXRlQ2FudmFzIiwibGVuZ3RoIiwiZ2V0Q29udGV4dCIsInRleHRBbGlnbiIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiZm9udCIsImhlYWRlck9mZnNldCIsInR1cm5OdW1iZXJJY29uU2l6ZSIsImxpdmVzSWNvblNpemUiLCJob3VyZ2xhc3NJY29uIiwiaGVhcnRJY29uIiwidG90YWxMdWNrUG9pbnRzIiwibHVja1NhbXBsZXMiLCJjdXJyZW50TGl2ZXMiLCJmaW5kT3Bwb25lbnRJbmZvIiwib3Bwb25lbnROYW1lIiwiaWR4IiwiaW5mb0xpc3QiLCJtYXRjaCIsImZpbmQiLCJEaXNwbGF5TmFtZSIsImkiLCJyb3dTdGFydFkiLCJiYXNlWVBvc2l0aW9uIiwid2luUGVyY2VudCIsIndpblZhbHVlIiwiaXNHYXBlZCIsIm91dGNvbWUiLCJXSU4iLCJMT1NTIiwiVElFIiwiZHJhd0ltYWdlIiwicmVzdWx0VGV4dCIsImJhc2VYUG9zaXRpb24iLCJwZXRKU09OIiwidG95Iiwib3Bwb25lbnRMaXZlc09mZnNldCIsIm9wcG9uZW50TGl2ZXMiLCJMaXZlcyIsImxvc3NWYWx1ZSIsImRyYXdWYWx1ZSIsIm1heFZhbHVlIiwiTWF0aCIsIm1heCIsImhhc0NlcnRhaW5PdXRjb21lIiwiY29sdW1uWCIsInRleHRTdGFydFkiLCJsaW5lSGVpZ2h0IiwiZXhwZWN0ZWRTY29yZSIsImxvc3NZIiwiZHJhd1kiLCJsdWNrUG9pbnRzIiwicmF3IiwiZXhwZWN0ZWRZIiwidG9GaXhlZCIsImdhcGVkWSIsImZvb3RlclRvcCIsImF2ZXJhZ2VMdWNrIiwidG90YWxMdWNrVGV4dCIsIndhcm5pbmdQYXJ0cyIsInNob3duIiwic2xpY2UiLCJqb2luIiwic3VmZml4IiwicHVzaCIsInRvQnVmZmVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/render.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute&page=%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute.js&appDir=C%3A%5CUsers%5Cporte%5CDownloads%5Csap-replay-bot-main%5Csap-replay-bot-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cporte%5CDownloads%5Csap-replay-bot-main%5Csap-replay-bot-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute&page=%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute.js&appDir=C%3A%5CUsers%5Cporte%5CDownloads%5Csap-replay-bot-main%5Csap-replay-bot-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cporte%5CDownloads%5Csap-replay-bot-main%5Csap-replay-bot-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_porte_Downloads_sap_replay_bot_main_sap_replay_bot_main_app_api_replays_id_image_route_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/replays/[id]/image/route.js */ \"(rsc)/./app/api/replays/[id]/image/route.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([C_Users_porte_Downloads_sap_replay_bot_main_sap_replay_bot_main_app_api_replays_id_image_route_js__WEBPACK_IMPORTED_MODULE_16__]);\nC_Users_porte_Downloads_sap_replay_bot_main_sap_replay_bot_main_app_api_replays_id_image_route_js__WEBPACK_IMPORTED_MODULE_16__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/replays/[id]/image/route\",\n        pathname: \"/api/replays/[id]/image\",\n        filename: \"route\",\n        bundlePath: \"app/api/replays/[id]/image/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\porte\\\\Downloads\\\\sap-replay-bot-main\\\\sap-replay-bot-main\\\\app\\\\api\\\\replays\\\\[id]\\\\image\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_porte_Downloads_sap_replay_bot_main_sap_replay_bot_main_app_api_replays_id_image_route_js__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/replays/[id]/image/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyZXBsYXlzJTJGJTVCaWQlNUQlMkZpbWFnZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcmVwbGF5cyUyRiU1QmlkJTVEJTJGaW1hZ2UlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZyZXBsYXlzJTJGJTVCaWQlNUQlMkZpbWFnZSUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNwb3J0ZSU1Q0Rvd25sb2FkcyU1Q3NhcC1yZXBsYXktYm90LW1haW4lNUNzYXAtcmVwbGF5LWJvdC1tYWluJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNwb3J0ZSU1Q0Rvd25sb2FkcyU1Q3NhcC1yZXBsYXktYm90LW1haW4lNUNzYXAtcmVwbGF5LWJvdC1tYWluJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQzBFO0FBQzVJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFD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dkQsa0JBQWtCLDZFQUFjO0FBQ2hDLCtCQUErQiw0RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOLDZCQUE2Qiw2RkFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcbmltcG9ydCB7IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycywgdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVDb250cm9sSGVhZGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2NhY2hlLWNvbnRyb2xcIjtcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxccG9ydGVcXFxcRG93bmxvYWRzXFxcXHNhcC1yZXBsYXktYm90LW1haW5cXFxcc2FwLXJlcGxheS1ib3QtbWFpblxcXFxhcHBcXFxcYXBpXFxcXHJlcGxheXNcXFxcW2lkXVxcXFxpbWFnZVxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcmVwbGF5cy9baWRdL2ltYWdlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcmVwbGF5cy9baWRdL2ltYWdlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yZXBsYXlzL1tpZF0vaW1hZ2Uvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxccG9ydGVcXFxcRG93bmxvYWRzXFxcXHNhcC1yZXBsYXktYm90LW1haW5cXFxcc2FwLXJlcGxheS1ib3QtbWFpblxcXFxhcHBcXFxcYXBpXFxcXHJlcGxheXNcXFxcW2lkXVxcXFxpbWFnZVxcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL3JlcGxheXMvW2lkXS9pbWFnZS9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute&page=%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute.js&appDir=C%3A%5CUsers%5Cporte%5CDownloads%5Csap-replay-bot-main%5Csap-replay-bot-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cporte%5CDownloads%5Csap-replay-bot-main%5Csap-replay-bot-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@napi-rs/canvas":
/*!**********************************!*\
  !*** external "@napi-rs/canvas" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@napi-rs/canvas");

/***/ }),

/***/ "canvas":
/*!*************************!*\
  !*** external "canvas" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("canvas");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute&page=%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freplays%2F%5Bid%5D%2Fimage%2Froute.js&appDir=C%3A%5CUsers%5Cporte%5CDownloads%5Csap-replay-bot-main%5Csap-replay-bot-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cporte%5CDownloads%5Csap-replay-bot-main%5Csap-replay-bot-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();
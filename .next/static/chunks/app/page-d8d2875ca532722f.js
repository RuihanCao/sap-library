(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3448:(e,a,l)=>{Promise.resolve().then(l.bind(l,7402))},7402:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>d});var s=l(5155),n=l(2115),t=l(2619),i=l.n(t);let c=["AboveCloudsBuild.png","ArcticBuild.png","AutumnForestBuild.png","BeachBuild.png","BridgeBuild.png","CastleWallBuild.png","CaveBuild.png","ChildRoomBuild.png","ChristmasCabinBuild.png","ColosseumBuild.png","CornFieldBuild.png","CyberSpaceBuild.png","DesertBuild.png","DungeonBuild.png","FarmBuild.png","FieldBuild.png","FoodLandBuild.png","FrontYardBuild.png","HalloweenStreetBuild.png","InsideSecretBaseBuild.png","JungleBuild.png","LavaCaveBuild.png","LavaMountainBuild.png","LunarTempleBuild.png","MoneyBinBuild.png","MoonBuild.png","PagodaBuild.png","PlaygroundBuild.png","SavannaBuild.png","ScaryForestBuild.png","SchoolHallwayBuild.png","SewerBuild.png","SnackBinBuild.png","SnowBuild.png","SpaceStationBuild.png","UnderwaterBuild.png","UrbanCityBuild.png","WildWestTownBuild.png","WinterPineForestBuild.png","WizardSchoolBuild.png"],r={cool:{bg:"#f3f6fb","bg-2":"#e3ebf6",panel:"#f6f9ff","panel-2":"#dbe8f7",surface:"#f9fbff",ink:"#0f1a2a",muted:"#4a5b76",edge:"#c7d6ea",accent:"#3aa7c9","accent-2":"#6ac2f0","accent-3":"#9ad7ff",glow:"rgba(74, 175, 230, 0.22)","overlay-1":"rgba(9, 17, 34, 0.62)","overlay-2":"rgba(9, 17, 34, 0.2)"},warm:{bg:"#fff0e3","bg-2":"#ffd8c4",panel:"#fff3e9","panel-2":"#ffcaa8",surface:"#fff7f0",ink:"#2a1408",muted:"#7a4b2f",edge:"#f2b68a",accent:"#ff8a3d","accent-2":"#ffb062","accent-3":"#ffd09a",glow:"rgba(255, 146, 84, 0.22)","overlay-1":"rgba(40, 18, 8, 0.58)","overlay-2":"rgba(40, 18, 8, 0.22)"},forest:{bg:"#eff6ee","bg-2":"#d7ead4",panel:"#f3faf2","panel-2":"#cfe8c9",surface:"#f7fbf6",ink:"#122414",muted:"#4c6a52",edge:"#bcd8bf",accent:"#3b9d64","accent-2":"#6bc489","accent-3":"#9fe2b6",glow:"rgba(59, 157, 100, 0.22)","overlay-1":"rgba(9, 20, 12, 0.6)","overlay-2":"rgba(9, 20, 12, 0.2)"},aqua:{bg:"#ecfbfb","bg-2":"#cdeff0",panel:"#f0fcfd","panel-2":"#c2edf0",surface:"#f7ffff",ink:"#0f2a2e",muted:"#4f6c73",edge:"#b6dfe3",accent:"#3cb4b9","accent-2":"#6dd7da","accent-3":"#9fe7ea",glow:"rgba(60, 180, 185, 0.22)","overlay-1":"rgba(6, 20, 24, 0.56)","overlay-2":"rgba(6, 20, 24, 0.2)"},night:{bg:"#eef1f7","bg-2":"#d2d8e6",panel:"#f4f6fb","panel-2":"#c7d0e6",surface:"#f8f9fd",ink:"#141a28",muted:"#515c74",edge:"#b7c1d7",accent:"#5b79ff","accent-2":"#7aa5ff","accent-3":"#b2c7ff",glow:"rgba(91, 121, 255, 0.2)","overlay-1":"rgba(8, 12, 24, 0.66)","overlay-2":"rgba(8, 12, 24, 0.22)"},stone:{bg:"#f2f1ef","bg-2":"#d9d4ce",panel:"#f7f4ef","panel-2":"#d5cec5",surface:"#faf8f5",ink:"#201c18",muted:"#5a524b",edge:"#c8bfb5",accent:"#b06b4c","accent-2":"#d2986b","accent-3":"#e5c3a1",glow:"rgba(176, 107, 76, 0.2)","overlay-1":"rgba(20, 16, 12, 0.6)","overlay-2":"rgba(20, 16, 12, 0.22)"}};function o(e){let{label:a,options:l,selected:t,onChange:i,placeholder:c}=e,[r,o]=(0,n.useState)(""),[d,p]=(0,n.useState)(!1),u=(0,n.useMemo)(()=>{let e=r.trim().toLowerCase();return e?l.filter(a=>a.name.toLowerCase().includes(e)).slice(0,80):l.slice(0,80)},[l,r]);return(0,s.jsxs)("div",{className:"multi-select",children:[(0,s.jsx)("div",{className:"multi-label",children:a}),(0,s.jsx)("input",{className:"multi-input",placeholder:c,value:r,onChange:e=>o(e.target.value),onFocus:()=>p(!0),onBlur:()=>setTimeout(()=>p(!1),150)}),d&&u.length>0&&(0,s.jsx)("div",{className:"multi-list",children:u.map(e=>(0,s.jsxs)("button",{type:"button",className:"multi-option",onMouseDown:e=>e.preventDefault(),onClick:()=>{var a;return a=e.name,void(!t.includes(a)&&(i([...t,a]),o("")))},children:[(0,s.jsx)("img",{src:e.sprite,alt:""}),(0,s.jsx)("span",{children:e.name}),(0,s.jsx)("span",{className:"multi-add",children:"Add"})]},e.name))}),t.length>0&&(0,s.jsx)("div",{className:"multi-chips",children:t.map(e=>{let a=l.find(a=>a.name===e);return(0,s.jsxs)("button",{type:"button",className:"chip",onClick:()=>{i(t.filter(a=>a!==e))},title:"Remove",children:[(null==a?void 0:a.sprite)?(0,s.jsx)("img",{src:a.sprite,alt:""}):null,(0,s.jsx)("span",{children:e}),(0,s.jsx)("span",{className:"chip-x",children:"\xd7"})]},e)})})]})}function d(){var e,a,l,t,d,p,u,h,m,x,v,g,j,y,f,b,N,k;let[M,C]=(0,n.useState)(""),[S,w]=(0,n.useState)(""),[B,_]=(0,n.useState)({total:0,done:0,active:!1}),[T,P]=(0,n.useState)(0),[A,L]=(0,n.useState)({pets:[],perks:[],toys:[],packs:[]}),[D,E]=(0,n.useState)({player:"",opponent:"",eitherPlayer:!1,packA:"",packB:"",excludeA:"",excludeB:"",mirrorMatch:!1,petMode:"any",perkMode:"any",toyMode:"any",matchType:"any",petLevelName:"",petLevelMin:"",exactTeam:"",outcome:"",outcomeTurn:"",minWins:"",goldMin:"",goldMax:"",rollsMin:"",rollsMax:"",summonsMin:"",summonsMax:"",econSide:"either",startDate:"",endDate:"",tags:"",turn:"",sort:"created_at",order:"desc",pageSize:"10"}),[F,U]=(0,n.useState)({player:!1,matchup:!1,pets:!1,perks:!1,toys:!1,turn:!1,matchType:!1}),[R,W]=(0,n.useState)(!1),[O,I]=(0,n.useState)(!1),[G,z]=(0,n.useState)([]),[K,H]=(0,n.useState)([]),[J,q]=(0,n.useState)([]),[Y,V]=(0,n.useState)([]),[Q,X]=(0,n.useState)(1),[Z,$]=(0,n.useState)(0),[ee,ea]=(0,n.useState)(!1),[el,es]=(0,n.useState)(!1),[en,et]=(0,n.useState)(null),[ei,ec]=(0,n.useState)(""),[er,eo]=(0,n.useState)(!1),[ed,ep]=(0,n.useState)(""),[eu,eh]=(0,n.useState)(!1),em="2026-02-12-text-fix";function ex(e){U(a=>{let l={...a,[e]:!a[e]};return l[e]||("player"===e&&E(e=>({...e,player:"",opponent:"",eitherPlayer:!1})),"matchup"===e&&E(e=>({...e,packA:"",packB:""})),"pets"===e&&z([]),"perks"===e&&H([]),"toys"===e&&q([]),"turn"===e&&E(e=>({...e,turn:""})),"matchType"===e&&E(e=>({...e,matchType:"any"}))),l})}async function ev(e){e&&e.preventDefault();let a=function(e){let a,l=[],s=/"Pid"\s*:\s*"([a-fA-F0-9\-]{10,})"/g;for(;null!==(a=s.exec(e));)l.push(a[1]);return l.length?l:e.split(/\s+/).map(e=>e.trim()).filter(Boolean)}(M);if(!a.length)return void w("No participation IDs found.");_({total:a.length,done:0,active:!0}),w("Uploading ".concat(a.length,"..."));let l=0,s=0,n=0,t=0;for(let e of a){let i=await fetch("/api/replays",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({participationId:e})}),c=await i.json();i.ok?"exists"===c.status?s+=1:l+=1:n+=1,t+=1,_({total:a.length,done:t,active:!0})}w("Uploaded ".concat(l,", skipped ").concat(s,", failed ").concat(n)),_({total:a.length,done:a.length,active:!1}),eg(null,1)}async function eg(e,a){e&&e.preventDefault();let l=a||1,s=new URLSearchParams;F.player&&(D.player&&s.set("player",D.player),D.opponent&&s.set("opponent",D.opponent),D.eitherPlayer&&s.set("eitherPlayer","true")),F.matchup&&(D.packA&&s.set("packA",D.packA),D.packB&&s.set("packB",D.packB)),F.pets&&(G.length&&s.set("pet",G.join(",")),s.set("petMode",D.petMode)),F.perks&&(K.length&&s.set("perk",K.join(",")),s.set("perkMode",D.perkMode)),F.toys&&(J.length&&s.set("toy",J.join(",")),s.set("toyMode",D.toyMode)),F.turn&&D.turn&&s.set("turn",D.turn),F.matchType&&D.matchType&&"any"!==D.matchType&&s.set("matchType",D.matchType),R&&(D.excludeA&&s.set("excludeA",D.excludeA),D.excludeB&&s.set("excludeB",D.excludeB),D.mirrorMatch&&s.set("mirrorMatch","true"),D.petLevelName&&s.set("petLevelName",D.petLevelName),D.petLevelMin&&s.set("petLevelMin",D.petLevelMin),D.exactTeam&&s.set("exactTeam",D.exactTeam),D.outcome&&s.set("outcome",D.outcome),D.outcomeTurn&&s.set("outcomeTurn",D.outcomeTurn),D.minWins&&s.set("minWins",D.minWins),D.goldMin&&s.set("goldMin",D.goldMin),D.goldMax&&s.set("goldMax",D.goldMax),D.rollsMin&&s.set("rollsMin",D.rollsMin),D.rollsMax&&s.set("rollsMax",D.rollsMax),D.summonsMin&&s.set("summonsMin",D.summonsMin),D.summonsMax&&s.set("summonsMax",D.summonsMax),D.econSide&&s.set("econSide",D.econSide),D.startDate&&s.set("startDate",D.startDate),D.endDate&&s.set("endDate",D.endDate),D.tags&&s.set("tags",D.tags)),s.set("page",String(l)),s.set("pageSize",String(D.pageSize||"10")),s.set("sort",D.sort),s.set("order",D.order);let n=await fetch("/api/search?".concat(s.toString())),t=await n.json();V(t.results||[]),$(t.total||0),X(t.page||l)}async function ej(e){ea(!0),es(!0),et(null);try{let a=await fetch("/api/replays/".concat(e)),l=await a.json();a.ok?et(l):et({error:(null==l?void 0:l.error)||"Failed to load replay"})}catch(e){et({error:"Failed to load replay"})}finally{es(!1)}}async function ey(){var e;if(!(null==en||null==(e=en.replay)?void 0:e.id))return;eo(!0),ep("");let a=ei.split(",").map(e=>e.trim()).filter(Boolean);try{let e=await fetch("/api/replays/".concat(en.replay.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:a})}),l=await e.json();if(!e.ok)return void ep((null==l?void 0:l.error)||"Failed to update tags");et(e=>e?{...e,replay:{...e.replay,tags:l.tags||a}}:e),ep("Saved.")}catch(e){ep("Failed to update tags")}finally{eo(!1)}}function ef(e){(null==e?void 0:e.shiftKey)&&(eh(!0),ep("Tag editor unlocked."))}(0,n.useEffect)(()=>{if(!c.length)return;let e=c[Math.floor(Math.random()*c.length)],a=function(e){let a=e.toLowerCase();return a.includes("arctic")||a.includes("snow")||a.includes("winter")||a.includes("moon")||a.includes("space")||a.includes("lunar")?r.cool:a.includes("desert")||a.includes("savanna")||a.includes("wildwest")||a.includes("lava")||a.includes("beach")||a.includes("snack")?r.warm:a.includes("underwater")||a.includes("aquatic")?r.aqua:a.includes("forest")||a.includes("jungle")||a.includes("farm")||a.includes("field")||a.includes("corn")||a.includes("frontyard")?r.forest:a.includes("cyber")||a.includes("wizard")||a.includes("pagoda")||a.includes("castle")?r.night:a.includes("dungeon")||a.includes("cave")||a.includes("sewer")||a.includes("bridge")||a.includes("school")||a.includes("moneybin")?r.stone:r.forest}(e),l=document.documentElement;l.style.setProperty("--bg-image",'url("/Sprite/Background/'.concat(e,'")')),Object.entries(a).forEach(e=>{let[a,s]=e;l.style.setProperty("--".concat(a),s)})},[]),(0,n.useEffect)(()=>{fetch("/api/meta").then(e=>e.json()).then(e=>L(e)).catch(()=>L({pets:[],perks:[],toys:[],packs:[]}))},[]),(0,n.useEffect)(()=>{eg(null,1)},[]),(0,n.useEffect)(()=>{if(!B.active)return void P(0);let e=setInterval(()=>{P(e=>(e+.15)%1)},150);return()=>clearInterval(e)},[B.active]),(0,n.useEffect)(()=>{let e=e=>{e.ctrlKey&&e.shiftKey&&"a"===e.key.toLowerCase()&&W(e=>!e),"Escape"===e.key&&ea(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,n.useEffect)(()=>{(null==en?void 0:en.replay)&&(ec((Array.isArray(en.replay.tags)?en.replay.tags:[]).join(", ")),ep(""),eh(!1))},[en]);let eb=e=>"arena"===(e||"").toLowerCase(),eN=e=>{var a;if(!e)return!1;let l=Number(null!=(a=e.active_player_count)?a:0);return Number.isFinite(l)&&l>2},ek=Math.max(1,Math.ceil(Z/Number(D.pageSize||10))),eM=Math.min(100,Math.floor((B.total>0?B.done/B.total*100:0)+(B.active?Math.min(.9,T):0)));return(0,s.jsxs)("main",{children:[(0,s.jsxs)("div",{className:"top-nav",children:[(0,s.jsx)(i(),{href:"/",className:"nav-link active",children:"Explorer"}),(0,s.jsx)(i(),{href:"/stats",className:"nav-link",children:"Stats"})]}),(0,s.jsx)("header",{className:"hero",children:(0,s.jsxs)("div",{className:"hero-copy",children:[(0,s.jsx)("h1",{children:"SAP Replay Explorer"}),(0,s.jsx)("p",{children:"Upload replays, explore matchups, and search by any metric you could need."})]})}),(0,s.jsxs)("section",{className:"section",onClick:()=>I(!1),children:[(0,s.jsx)("h2",{children:"Upload Replays"}),(0,s.jsxs)("p",{className:"muted",children:["Paste a participation ID, multiple IDs, or replay JSONs. Example: ",'{"Pid":"...","T":1}{"Pid":"...","T":1}']}),(0,s.jsxs)("form",{className:"bulk",onSubmit:ev,children:[(0,s.jsx)("textarea",{value:M,onChange:e=>C(e.target.value),placeholder:"Paste replay JSON objects or IDs here"}),(0,s.jsx)("button",{type:"submit",children:"Upload"})]}),B.total>0&&(0,s.jsxs)("div",{className:"progress",children:[(0,s.jsx)("div",{className:"progress-bar",style:{width:"".concat(eM,"%")}}),(0,s.jsxs)("div",{className:"progress-text",children:[eM,"%"]})]}),(0,s.jsx)("div",{className:"status",children:S})]}),(0,s.jsxs)("section",{className:"section",children:[(0,s.jsxs)("div",{className:"section-head",children:[(0,s.jsx)("h2",{children:"Search"}),(0,s.jsxs)("div",{className:"section-actions",children:[(0,s.jsx)("button",{type:"button",className:"ghost",onClick:function(){U({player:!1,matchup:!1,pets:!1,perks:!1,toys:!1,turn:!1,matchType:!1}),W(!1),E(e=>({...e,player:"",opponent:"",eitherPlayer:!1,packA:"",packB:"",excludeA:"",excludeB:"",mirrorMatch:!1,petMode:"any",perkMode:"any",toyMode:"any",matchType:"any",petLevelName:"",petLevelMin:"",exactTeam:"",outcome:"",outcomeTurn:"",minWins:"",goldMin:"",goldMax:"",rollsMin:"",rollsMax:"",summonsMin:"",summonsMax:"",econSide:"either",startDate:"",endDate:"",tags:"",turn:""})),z([]),H([]),q([]),eg(null,1)},children:"Clear Filters"}),(0,s.jsx)("button",{className:"secondary",type:"button",onClick:e=>eg(e,1),children:"Search"})]})]}),(0,s.jsxs)("div",{className:"toggles",children:[(0,s.jsx)("button",{type:"button",className:F.player?"toggle active":"toggle",onClick:()=>ex("player"),children:"Player"}),(0,s.jsx)("button",{type:"button",className:F.matchup?"toggle active":"toggle",onClick:()=>ex("matchup"),children:"Pack Matchup"}),(0,s.jsx)("button",{type:"button",className:F.pets?"toggle active":"toggle",onClick:()=>ex("pets"),children:"Pets"}),(0,s.jsx)("button",{type:"button",className:F.perks?"toggle active":"toggle",onClick:()=>ex("perks"),children:"Perks"}),(0,s.jsx)("button",{type:"button",className:F.toys?"toggle active":"toggle",onClick:()=>ex("toys"),children:"Toys"}),(0,s.jsx)("button",{type:"button",className:F.turn?"toggle active":"toggle",onClick:()=>ex("turn"),children:"Turn"}),(0,s.jsx)("button",{type:"button",className:F.matchType?"toggle active":"toggle",onClick:()=>ex("matchType"),children:"Game Type"}),(0,s.jsx)("button",{type:"button",className:R?"toggle subtle active":"toggle subtle",onClick:()=>W(e=>!e),children:"Advanced"})]}),(0,s.jsxs)("form",{onSubmit:e=>eg(e,1),children:[(0,s.jsxs)("div",{className:"filters",children:[F.player&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Player"}),(0,s.jsx)("input",{placeholder:"Player name",value:D.player,onChange:e=>E({...D,player:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Opponent"}),(0,s.jsx)("input",{placeholder:"Opponent name",value:D.opponent,onChange:e=>E({...D,opponent:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Either Player"}),(0,s.jsxs)("select",{value:D.eitherPlayer?"yes":"no",onChange:e=>E({...D,eitherPlayer:"yes"===e.target.value}),children:[(0,s.jsx)("option",{value:"no",children:"No"}),(0,s.jsx)("option",{value:"yes",children:"Yes"})]})]})]}),F.matchup&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Pack A"}),(0,s.jsxs)("select",{value:D.packA,onChange:e=>E({...D,packA:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Any"}),A.packs.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Pack B"}),(0,s.jsxs)("select",{value:D.packB,onChange:e=>E({...D,packB:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Any"}),A.packs.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]})]}),F.pets&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{label:"Pets",options:A.pets,selected:G,onChange:z,placeholder:"Search pets and add"}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Pet Mode"}),(0,s.jsxs)("select",{value:D.petMode,onChange:e=>E({...D,petMode:e.target.value}),children:[(0,s.jsx)("option",{value:"any",children:"Any of these"}),(0,s.jsx)("option",{value:"all",children:"All of these"})]})]})]}),F.perks&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{label:"Perks",options:A.perks,selected:K,onChange:H,placeholder:"Search perks and add"}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Perk Mode"}),(0,s.jsxs)("select",{value:D.perkMode,onChange:e=>E({...D,perkMode:e.target.value}),children:[(0,s.jsx)("option",{value:"any",children:"Any of these"}),(0,s.jsx)("option",{value:"all",children:"All of these"})]})]})]}),F.toys&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{label:"Toys",options:A.toys,selected:J,onChange:q,placeholder:"Search toys and add"}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Toy Mode"}),(0,s.jsxs)("select",{value:D.toyMode,onChange:e=>E({...D,toyMode:e.target.value}),children:[(0,s.jsx)("option",{value:"any",children:"Any of these"}),(0,s.jsx)("option",{value:"all",children:"All of these"})]})]})]}),F.turn&&(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Turn"}),(0,s.jsx)("input",{placeholder:"Turn",value:D.turn,onChange:e=>E({...D,turn:e.target.value})})]}),F.matchType&&(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Game Type"}),(0,s.jsxs)("select",{value:D.matchType,onChange:e=>E({...D,matchType:e.target.value}),children:[(0,s.jsx)("option",{value:"any",children:"Any"}),(0,s.jsx)("option",{value:"ranked",children:"Ranked"}),(0,s.jsx)("option",{value:"arena",children:"Arena"}),(0,s.jsx)("option",{value:"private",children:"Private"}),(0,s.jsx)("option",{value:"unknown",children:"Unknown"})]})]})]}),R&&(0,s.jsx)("div",{className:"advanced",children:(0,s.jsxs)("div",{className:"filters",children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Exclude Pack A"}),(0,s.jsxs)("select",{value:D.excludeA,onChange:e=>E({...D,excludeA:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"None"}),A.packs.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Exclude Pack B"}),(0,s.jsxs)("select",{value:D.excludeB,onChange:e=>E({...D,excludeB:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"None"}),A.packs.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Mirror Match"}),(0,s.jsxs)("select",{value:D.mirrorMatch?"yes":"no",onChange:e=>E({...D,mirrorMatch:"yes"===e.target.value}),children:[(0,s.jsx)("option",{value:"no",children:"No"}),(0,s.jsx)("option",{value:"yes",children:"Yes"})]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Pet Level (Name)"}),(0,s.jsx)("input",{placeholder:"Pet name",value:D.petLevelName,onChange:e=>E({...D,petLevelName:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Pet Level (Min)"}),(0,s.jsx)("input",{placeholder:"3",value:D.petLevelMin,onChange:e=>E({...D,petLevelMin:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Exact Team (5 pets, comma)"}),(0,s.jsx)("input",{placeholder:"Ant, Fish, ...",value:D.exactTeam,onChange:e=>E({...D,exactTeam:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Outcome"}),(0,s.jsxs)("select",{value:D.outcome,onChange:e=>E({...D,outcome:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Any"}),(0,s.jsx)("option",{value:"win",children:"Win"}),(0,s.jsx)("option",{value:"loss",children:"Loss"}),(0,s.jsx)("option",{value:"draw",children:"Draw"})]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Outcome Turn"}),(0,s.jsx)("input",{placeholder:"Turn",value:D.outcomeTurn,onChange:e=>E({...D,outcomeTurn:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Min Wins"}),(0,s.jsx)("input",{placeholder:"8",value:D.minWins,onChange:e=>E({...D,minWins:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Economy Side"}),(0,s.jsxs)("select",{value:D.econSide,onChange:e=>E({...D,econSide:e.target.value}),children:[(0,s.jsx)("option",{value:"either",children:"Either"}),(0,s.jsx)("option",{value:"player",children:"Player"}),(0,s.jsx)("option",{value:"opponent",children:"Opponent"})]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Gold Min"}),(0,s.jsx)("input",{placeholder:"10",value:D.goldMin,onChange:e=>E({...D,goldMin:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Gold Max"}),(0,s.jsx)("input",{placeholder:"10",value:D.goldMax,onChange:e=>E({...D,goldMax:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Rolls Min"}),(0,s.jsx)("input",{placeholder:"4",value:D.rollsMin,onChange:e=>E({...D,rollsMin:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Rolls Max"}),(0,s.jsx)("input",{placeholder:"10",value:D.rollsMax,onChange:e=>E({...D,rollsMax:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Summons Min"}),(0,s.jsx)("input",{placeholder:"0",value:D.summonsMin,onChange:e=>E({...D,summonsMin:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Summons Max"}),(0,s.jsx)("input",{placeholder:"5",value:D.summonsMax,onChange:e=>E({...D,summonsMax:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:D.startDate,onChange:e=>E({...D,startDate:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"End Date"}),(0,s.jsx)("input",{type:"date",value:D.endDate,onChange:e=>E({...D,endDate:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Tags (comma)"}),(0,s.jsx)("input",{placeholder:"tournament, week1",value:D.tags,onChange:e=>E({...D,tags:e.target.value})})]})]})})]})]}),(0,s.jsxs)("section",{className:"section",children:[(0,s.jsxs)("div",{className:"results-header",children:[(0,s.jsx)("h2",{children:"Results"}),(0,s.jsxs)("div",{className:"results-actions",children:[(0,s.jsxs)("div",{className:"status",children:[Z," results"]}),(0,s.jsxs)("div",{className:"sort-menu",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("button",{type:"button",className:"icon-button","aria-label":"Sort options",onClick:()=>I(e=>!e),children:["Sort",(0,s.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M4 6h10M4 12h16M4 18h7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})]}),O&&(0,s.jsxs)("div",{className:"sort-panel",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Sort"}),(0,s.jsxs)("select",{value:D.sort,onChange:e=>E({...D,sort:e.target.value}),children:[(0,s.jsx)("option",{value:"created_at",children:"Newest"}),(0,s.jsx)("option",{value:"player_name",children:"Player"}),(0,s.jsx)("option",{value:"pack",children:"Pack"})]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Order"}),(0,s.jsxs)("select",{value:D.order,onChange:e=>E({...D,order:e.target.value}),children:[(0,s.jsx)("option",{value:"desc",children:"Desc"}),(0,s.jsx)("option",{value:"asc",children:"Asc"})]})]})]})]})]})]}),(0,s.jsx)("div",{className:"results",children:Y.map(e=>(0,s.jsxs)("div",{className:"card",role:"button",tabIndex:0,onClick:()=>ej(e.id),onKeyDown:a=>"Enter"===a.key&&ej(e.id),children:[(0,s.jsxs)("div",{className:"card-head",children:[(0,s.jsxs)("h3",{children:[(0,s.jsx)("span",{className:"name-line",children:e.player_name||"Unknown Player"}),(0,s.jsx)("span",{className:"name-line vs-line",children:"vs"}),eb(e.match_type)||eN(e)?(0,s.jsx)("span",{className:"name-line world-name",children:"The World"}):(0,s.jsx)("span",{className:"name-line",children:e.opponent_name||"Unknown"})]}),(0,s.jsxs)("div",{className:"game-type",children:[(0,s.jsx)("img",{src:function(e){let a=(e||"unknown").toLowerCase();return"ranked"===a?"/Sprite/Cosmetic/CrownHat.png":"arena"===a?"/Sprite/Food/Mushroom.png":"private"===a?"/Sprite/Toys/RelicFoamSword.png":"/Sprite/Cosmetic/TrophyHat.png"}(e.match_type),alt:e.match_type||"Unknown",style:{transform:"ranked"===(e.match_type||"unknown").toLowerCase()?"scale(1.15)":"none"}}),(0,s.jsx)("span",{className:"game-type-label",style:{fontSize:(e.match_type||"unknown").length>6?"10px":"11px"},children:(e.match_type||"unknown").toUpperCase()})]})]}),(0,s.jsxs)("div",{className:"muted",children:["Matchup: ",e.pack||"Unknown"," vs ",e.opponent_pack||"Unknown"]}),(0,s.jsxs)("div",{className:"muted",children:["Game Type: ",(e.match_type||"unknown").toUpperCase()]}),(0,s.jsx)("div",{className:"replay-image-wrap",children:(0,s.jsx)("img",{className:"replay-image",src:"/api/replays/".concat(e.id,"/image?v=").concat(encodeURIComponent(e.created_at||em)),alt:"Replay",onLoad:e=>{var a;return null==(a=e.currentTarget.closest(".replay-image-wrap"))?void 0:a.classList.add("loaded")},onError:e=>{var a;return null==(a=e.currentTarget.closest(".replay-image-wrap"))?void 0:a.classList.add("loaded")}})})]},e.id))}),(0,s.jsxs)("div",{className:"pagination",children:[(0,s.jsx)("button",{disabled:Q<=1,onClick:()=>eg(null,Q-1),children:"Prev"}),(0,s.jsxs)("div",{className:"page-info",children:["Page ",Q," / ",ek]}),(0,s.jsx)("button",{disabled:Q>=ek,onClick:()=>eg(null,Q+1),children:"Next"})]})]}),ee&&(0,s.jsx)("div",{className:"modal-backdrop",onClick:()=>ea(!1),children:(0,s.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"modal-head",children:[(0,s.jsx)("h3",{children:"Replay Details"}),(0,s.jsx)("button",{className:"ghost",type:"button",onClick:()=>ea(!1),children:"Close"})]}),el&&(0,s.jsx)("div",{className:"muted",children:"Loading..."}),!el&&(null==en?void 0:en.error)&&(0,s.jsx)("div",{className:"muted",children:en.error}),!el&&(null==en?void 0:en.replay)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"modal-grid",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Matchup"}),(0,s.jsxs)("span",{children:[en.replay.pack||"Unknown"," vs ",en.replay.opponent_pack||"Unknown"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Game Type"}),(0,s.jsx)("span",{children:(en.replay.match_type||"unknown").toUpperCase()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Version"}),(0,s.jsx)("span",{children:en.replay.game_version||"?"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Participation"}),(0,s.jsx)("span",{children:en.replay.participation_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Turns"}),(0,s.jsx)("span",{children:null!=(v=null==(e=en.stats)?void 0:e.turns)?v:"?"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Max Lives"}),(0,s.jsx)("span",{children:null!=(g=en.replay.max_lives)?g:"?"})]}),en.replay.match_name&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Match Name"}),(0,s.jsx)("span",{children:en.replay.match_name})]}),null!==en.replay.match_pack&&void 0!==en.replay.match_pack&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Match Pack"}),(0,s.jsx)("span",{children:en.replay.match_pack})]}),null!==en.replay.max_player_count&&void 0!==en.replay.max_player_count&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Max Players"}),(0,s.jsx)("span",{children:en.replay.max_player_count})]}),null!==en.replay.active_player_count&&void 0!==en.replay.active_player_count&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Active Players"}),(0,s.jsx)("span",{children:en.replay.active_player_count})]}),null!==en.replay.spectator_mode&&void 0!==en.replay.spectator_mode&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"label",children:"Spectator Mode"}),(0,s.jsx)("span",{children:en.replay.spectator_mode})]})]}),eu&&(0,s.jsxs)("div",{className:"tag-editor",children:[(0,s.jsxs)("div",{className:"tag-header",children:[(0,s.jsx)("span",{className:"label",children:"Tags"}),(0,s.jsx)("span",{className:"tag-list",children:(null==(a=en.replay.tags)?void 0:a.length)?en.replay.tags.join(", "):"None"})]}),(0,s.jsxs)("div",{className:"tag-input-row",children:[(0,s.jsx)("input",{placeholder:"Add tags (comma-separated)",value:ei,onChange:e=>ec(e.target.value)}),(0,s.jsx)("button",{type:"button",className:"secondary",onClick:ey,disabled:er,children:er?"Saving...":"Save Tags"})]}),ed?(0,s.jsx)("div",{className:"tag-status",children:ed}):null]}),(0,s.jsxs)("div",{className:"modal-sides",children:[(0,s.jsxs)("div",{className:"modal-side ".concat((null==(l=en.stats)?void 0:l.last_outcome)===1?"winner":""),children:[(0,s.jsx)("h4",{children:en.replay.player_name||"Unknown Player"}),(0,s.jsxs)("div",{className:"stat",onClick:ef,role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&ef(e),children:[(0,s.jsx)("span",{className:"label",children:"Gold Spent"}),(0,s.jsx)("span",{children:null!=(j=null==(t=en.stats)?void 0:t.player_gold_spent)?j:"?"})]}),(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("span",{className:"label",children:"Rolls"}),(0,s.jsx)("span",{children:null!=(y=null==(d=en.stats)?void 0:d.player_rolls)?y:"?"})]}),(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("span",{className:"label",children:"Unspent Gold"}),(0,s.jsx)("span",{children:null!=(f=null==(p=en.stats)?void 0:p.player_unspent_gold)?f:"?"})]})]}),!eb(en.replay.match_type)&&!eN(en.replay)&&(0,s.jsxs)("div",{className:"modal-side ".concat((null==(u=en.stats)?void 0:u.last_outcome)===2?"winner":""),children:[(0,s.jsx)("h4",{children:en.replay.opponent_name||"Unknown"}),(0,s.jsxs)("div",{className:"stat",onClick:ef,role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&ef(e),children:[(0,s.jsx)("span",{className:"label",children:"Gold Spent"}),(0,s.jsx)("span",{children:null!=(b=null==(h=en.stats)?void 0:h.opponent_gold_spent)?b:"?"})]}),(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("span",{className:"label",children:"Rolls"}),(0,s.jsx)("span",{children:null!=(N=null==(m=en.stats)?void 0:m.opponent_rolls)?N:"?"})]}),(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("span",{className:"label",children:"Unspent Gold"}),(0,s.jsx)("span",{children:null!=(k=null==(x=en.stats)?void 0:x.opponent_unspent_gold)?k:"?"})]})]})]}),(0,s.jsx)("img",{className:"modal-image",src:"/api/replays/".concat(en.replay.id,"/image?v=").concat(encodeURIComponent(en.replay.created_at||em)),alt:"Replay"})]})]})})]})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=3448)),_N_E=e.O()}]);